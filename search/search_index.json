{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Documenta\u00e7\u00e3o Risco Socioambiental O portal de Risco Socioambiental \u00e9 uma plataforma robusta e aberta que visa facilitar o cruzamento de informa\u00e7\u00f5es que permitam identificar potenciais impactos ambientais e sociais ligados \u00e0 produ\u00e7\u00e3o agr\u00edcola no Brasil, permitindo \u00e0s institui\u00e7\u00f5es financeiras, empresas, governos e outras partes interessadas entender melhor e mitigar riscos associados \u00e0 produ\u00e7\u00e3o agropecu\u00e1ria. Essa \u00e9 uma documenta\u00e7\u00e3o para a plataforma Risco Socioambiental , desenvolvida pelo Laborat\u00f3rio de Processamento de Images e Geoprocessamento da Universidade Federal de Goi\u00e1s (LAPIG/UFG) em parceria com o WWF .","title":"HOME"},{"location":"#documentacao-risco-socioambiental","text":"O portal de Risco Socioambiental \u00e9 uma plataforma robusta e aberta que visa facilitar o cruzamento de informa\u00e7\u00f5es que permitam identificar potenciais impactos ambientais e sociais ligados \u00e0 produ\u00e7\u00e3o agr\u00edcola no Brasil, permitindo \u00e0s institui\u00e7\u00f5es financeiras, empresas, governos e outras partes interessadas entender melhor e mitigar riscos associados \u00e0 produ\u00e7\u00e3o agropecu\u00e1ria. Essa \u00e9 uma documenta\u00e7\u00e3o para a plataforma Risco Socioambiental , desenvolvida pelo Laborat\u00f3rio de Processamento de Images e Geoprocessamento da Universidade Federal de Goi\u00e1s (LAPIG/UFG) em parceria com o WWF .","title":"Documenta\u00e7\u00e3o Risco Socioambiental"},{"location":"01-guia_dados_geograficos/","text":"Dados Geogr\u00e1ficos A plataforma de Risco Socioambiental visa facilitar o cruzamento de informa\u00e7\u00f5es que permitam identificar potenciais impactos ambientais e sociais ligados \u00e0 produ\u00e7\u00e3o agr\u00edcola no Brasil, permitindo \u00e0s institui\u00e7\u00f5es financeiras, empresas, governos e outras partes interessadas entender melhor e mitigar os riscos associados \u00e0 produ\u00e7\u00e3o agropecu\u00e1ria. A sua abordagem baseia-se em apresentar um conjunto de indicadores em um mapa interativo de f\u00e1cil navega\u00e7\u00e3o, e relat\u00f3rios que trazem s\u00e9ries hist\u00f3ricas destes dados. Na plataforma, os usu\u00e1rios podem realizar buscas, visualizar os dados de seu interesse, recuperar os mesmos e gerar relat\u00f3rios. A unidade de refer\u00eancia s\u00e3o os munic\u00edpios, mas tamb\u00e9m \u00e9 poss\u00edvel fazer an\u00e1lises por estados, biomas e regi\u00f5es espec\u00edficas. Agricultura Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1rea Plantada de Algod\u00e3o \u00c1reas de planta\u00e7\u00e3o de algod\u00e3o em caro\u00e7o por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea plantada de cana-de-a\u00e7\u00facar \u00c1reas de planta\u00e7\u00e3o de cana-de-a\u00e7\u00facar por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea Plantada de Milho \u00c1reas de planta\u00e7\u00e3o de Milho em gr\u00e3o por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea Plantada de Soja \u00c1reas de planta\u00e7\u00e3o de Soja em gr\u00e3o, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1reas de queimadas Dados de queimadas ocorridos no Brasil, para o per\u00edodo de 2002 \u00e0 2015, produzidos a partir de imagens MODIS (MCD45A1). 2002-2015 1:250.000 LAPIG Download Armaz\u00e9ns N\u00famero de armaz\u00e9ns destinados a armazenamento e controle de produ\u00e7\u00e3o no Brasil. Gerado a partir da compila\u00e7\u00e3o de dados da Agrosat\u00e9lite e da CONAB \u2013 Companhia Nacional de Abastecimento, espacializados pelo LAPIG \u2013 Laborat\u00f3rio de Processamento de Imagens e Geoporcessamento. 2017 1:250.000 LAPIG Download Assentamentos Rurais Localiza\u00e7\u00e3o dos assentamentos rurais, produzido pelo Instituto Nacional de Coloniza\u00e7\u00e3o e Reforma Agr\u00e1ria (INCRA). 2015 1:250.000 INCRA Download Desmatamento Dados de desmatamentos ocorridos, produzidos a partir de compila\u00e7\u00e3o de dados do PRODES(Bioma Amaz\u00f4nia: 2005 - 2016), SIAD(Bioma Cerrado: 2003 - 2016) e SOS Mata Atl\u00e2ntica(Bioma Mata Atl\u00e2ntica: 2011 - 2016). 2003-2016 1:250.000 PRODES Download Desmatamento Acumulado Desmatamento acumulado nos \u00faltimos 5 anos (2012 a 2016), nos Biomas Amaz\u00f4nia, Cerrado e Mata atl\u00e2ntica. Utilizando dados do PRODES/INPE para a Amaz\u00f4nia, SIAD/LAPIG para o Cerrado, SOS Mata Atl\u00e2ntica para a Mata Atl\u00e2ntica. 2016 1:250.000 LAPIG Download Floresta plantada Dados produzido pela ONG Transparent World com o apoio do WRI, com abrang\u00eancia territorial para todo o Brasil. 2014 1:250.000 WRI Download Piv\u00f4s centrais Mapeamento realizado pela Embrapa da \u00e1rea irrigada e do n\u00famero de equipamentos de irriga\u00e7\u00e3o por piv\u00f4 central no Brasil em 2013. 2013 1:250.000 EMBRAPA Download Produ\u00e7\u00e3o de Algod\u00e3o - ton Quantidade de algod\u00e3o em caro\u00e7o produzido por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de cana-de-a\u00e7\u00facar - ton Quantidade de cana-de-a\u00e7\u00facar produzida por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Lenha - m\u00b3 Quantidade de Lenha produzida por munic\u00edpios do brasil, em Metros C\u00fabicos, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Milho - ton Quantidade de milho em gr\u00e3o produzido por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Soja - ton Quantidade de soja em gr\u00e3o produzida por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Pecu\u00e1ria Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas de pastagens Mapeamento de \u00e1reas de pastagem, a partir de compila\u00e7\u00e3o de dados TerraClass Amazon; Funcate; PROBIO; Canasat e TNC. A \u00e1rea de pastagem mapeada \u00e9 de 175.396.874 ha, os mapeamentos que comp\u00f5em s\u00e3o: Bioma Pantanal - Mapeamento da Bacia do Alto Paraguai para 2014; Bioma Caatinga ( Mapeamento Lapig - Vers\u00e3o 2 2014-2016) - Esse mapeamento classificou as \u00e1reas de pasto limpo, pasto sujo e \u00e1rea degradada (solo exposto); Bioma Mata Atl\u00e2ntica (Mapeamento Lapig 2014-2016) - Esse mapeamento classificou as \u00e1reas de pasto limpo, pasto sujo e \u00e1rea degradada (solo exposto); Bioma Pampa - Mapeamento realizado pelo IBGE para o estado do Rio Grande do Sul (2012); Bioma Amaz\u00f4nia - Mapeamento TerraClass Amaz\u00f4nia 2014; Bioma Cerrado - Mapeamento TerraClass Cerrado 2013. 2016 1:250.000 LAPIG Download \u00c1reas de queimadas Dados de queimadas ocorridos no Brasil, para o per\u00edodo de 2002 \u00e0 2016, produzidos a partir de imagens MODIS (MCD45A1). 2002-2016 1:250.000 LAPIG Download Desmatamento Dados de desmatamentos ocorridos, produzidos a partir de compila\u00e7\u00e3o de dados do PRODES(Bioma Amaz\u00f4nia: 2005 - 2016), SIAD(Bioma Cerrado: 2003 - 2016) e SOS Mata Atl\u00e2ntica(Bioma Mata Atl\u00e2ntica: 2011 - 2016). 2003-2016 1:250.000 PRODES Download Desmatamento Acumulado Desmatamento acumulado nos \u00faltimos 5 anos (2012 a 2016), nos Biomas Amaz\u00f4nia, Cerrado e Mata atl\u00e2ntica. Utilizando dados do PRODES/INPE para a Amaz\u00f4nia, SIAD/LAPIG para o Cerrado, SOS Mata Atl\u00e2ntica para a Mata Atl\u00e2ntica. 2016 1:250.000 LAPIG Download Frigor\u00edficos e matadouros Dado produzido a partir de informa\u00e7\u00f5es de Matadouros e/ou Frigor\u00edficos Bovinos do Brasil aptos a exporta\u00e7\u00e3o, inspecionados visualmente pelo LAPIG. 2017 1:250.000 LAPIG Download Produ\u00e7\u00e3o de leite - lt Quantidade de leite em litros produzido por munic\u00edpios do brasil, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Rebanho bovino Quantidade de bovinos nos munic\u00edpios brasileiros. Informa\u00e7\u00e3o produzida pelo Instituto Brasileiro de Geografia e Estat\u00edstica (IBGE) e espacializada pelo LAPIG. 2000-2015 1:250.000 IBGE Download Social Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas de terras ind\u00edgenas \u00c1reas de terras ind\u00edgenas brasileiras incluindo situa\u00e7\u00e3o (regularizada, delimitada, etc), produzidos pela Funda\u00e7\u00e3o Nacional do \u00cdndio (FUNAI). 2012 1:250.000 FUNAI Download \u00c1reas Embargadas \u00c1reas que sofrer\u00e3o san\u00e7\u00f5es administrativas e/ou medidas cautelar, tendo por objetivo propiciar a regenera\u00e7\u00e3o do meio ambiente e dar viabilidade \u00e0 recupera\u00e7\u00e3o da \u00e1rea degradada, fonte IBAMA. 2017 1:250.000 LAPIG Download Conflitos por \u00e1gua (n\u00b0 ocorr\u00eancias) N\u00famero de ocorr\u00eancias de a\u00e7\u00f5es de resist\u00eancia por munic\u00edpio, em geral coletivas, que visam garantir o uso e a preserva\u00e7\u00e3o das \u00e1guas, no per\u00edodo de 2006 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2006-2015 1:250.000 CPT Download Conflitos por terra (n\u00b0 ocorr\u00eancias) N\u00famero de conflitos por munic\u00edpio em a\u00e7\u00f5es de resist\u00eancia e enfrentamento pela posse, uso e propriedade da terra e pelo acesso aos recursos naturais, no per\u00edodo de 2010 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2010-2015 1:250.000 CPT Download Conflitos por terra (n\u00b0 pessoas) N\u00famero de pessoas envolvidas em conflitos ocorridos por munic\u00edpio, em a\u00e7\u00f5es de resist\u00eancia e enfrentamento pela posse, uso e propriedade da terra e pelo acesso aos recursos naturais, no per\u00edodo de 2010 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2010-2015 1:250.000 CPT Download \u00cdndice de Desenvolvimento Humano \u00cdndice de Desenvolvimento Humano Municipal, calculado pela m\u00e9dia geom\u00e9trica dos \u00edndices das dimens\u00f5es de Renda, Educa\u00e7\u00e3o e Longevidade. Esse c\u00e1lculo foi realizado a partir das informa\u00e7\u00f5es dos 3 \u00faltimos Censos Demogr\u00e1ficos do IBGE \u2013 1991, 2000 e 2010 e espacializado pelo LAPIG. 1991/ 2000/ 2010 1:250.000 IBGE Download Quilombos \u00c1reas de Quilombos que possuem titula\u00e7\u00e3o de territ\u00f3rios quilombolas, produzido pelo Instituto Nacional de Coloniza\u00e7\u00e3o e Reforma Agr\u00e1ria (INCRA). 2015 1:250.000 INCRA Download Terras ind\u00edgenas Quantidade de terras ind\u00edgenas por munic\u00edpio do Brasil at\u00e9 o ano de 2015, segundo dados produzidos pela Funda\u00e7\u00e3o Nacional do \u00cdndio(FUNAI) e espacializados pelo LAPIG. 2015 1:250.000 FUNAI Download Trabalho Escravo N\u00famero de pessoas envolvidas por munic\u00edpio, em a\u00e7\u00f5es de trabalhos for\u00e7ados, jornada exaustiva ou por sujeit\u00e1-lo \u00e1 condi\u00e7\u00f5es degradantes de trabalho, no per\u00edodo de 2000/2002 e de 2008 a 2016, produzidos pela Comiss\u00e3o Pastoral da Terra (CPT) e espacializados pelo LAPIG. 2000-2016 1:250.000 CPT Download Ambiental Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas priorit\u00e1rias para conserva\u00e7\u00e3o da biodiversidade Revis\u00e3o de \u00e1reas priorit\u00e1rias para a conserva\u00e7\u00e3o da biodiversidade, classificadas quanto a import\u00e2ncia biol\u00f3gica. Produzido pelo Minit\u00e9rio do Meio Ambiente (MMA) 2007 1:250.000 MMA Download Cobertura vegetal remanescente Compila\u00e7\u00e3o de mapeamentos de vegeta\u00e7\u00e3o nativa organizado pelo LAPIG/UFG.Para o bioma Amaz\u00f4nia considerou-se os dados do TerraClass Amaz\u00f4nia, com refer\u00eancia em 2012. Para o bioma Cerrado utilizou-se os dados TerraClass Cerrado, com refer\u00eancia em 2012. Os dados produzidos pela SOS Mata Atl\u00e2ntica, com refer\u00eancia em 2014, foram utilizados no bioma Mata Atl\u00e2ntica. O Mapeamento da cobertura vegetal da Bacia do Alto Paraguai, com refer\u00eancia em 2014, foi utilizado para o bioma Pantanal. Nos biomas Caatinga e Pampa considerou-se os dados produzidos no \u00e2mbito do PMDBBS, com refer\u00eancia em 2008 2014 1:250.000 LAPIG Download Corpos d'\u00e1gua Mapeamento dos corpos de \u00e1gua dos biomas: Caatinga (2008/2009), Mata Atl\u00e2ntica (2008/2009), Cerrado (2008/2009/2010), Pampa (2008/2009) e Pantanal (2008/2009) com base no Projeto de Monitoramento do Desmatamento dos Biomas Brasileiros por Sat\u00e9lite (PMDBBS). 2009 1:250.000 PMDBBS Download D\u00e9ficit de APP Dado produzido pelo CSR/UFMG e LAGESA/UFMG com o apoio da Climate and Land Use Alliance, com abrang\u00eancia territorial para todo Brasil. 2014 1:250.000 CSR/UFMG Download D\u00e9ficit de Reserva Legal Dado produzido pelo CSR/UFMG e LAGESA/UFMG com o apoio da Climate and Land Use Alliance, com abrang\u00eancia territorial para todo Brasil. 2014 1:250.000 CSR/UFMG Download D\u00e9ficit h\u00eddrico Dados acumulados do ano de 2012 do m\u00e1ximo de \u00e1gua doce dispon\u00edvel para infiltra\u00e7\u00e3o e escoamento (Blue Water) para as ottobacias de n\u00edvel 6 localizadas no Brasil, produzidos a partir de imagens do produto MOD16A2 e sat\u00e9lite TRMM. 2012 1:250.000 LAPIG Download Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral Localiza\u00e7\u00e3o das unidades de conserva\u00e7\u00e3o de prote\u00e7\u00e3o integral brasileiras, incluindo a Base ao Milion\u00e9simo do IBGE de 2014. 2014 1:250.000 IBGE Download Econ\u00f4mico Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado Centrais hidrel\u00e9tricas Localiza\u00e7\u00e3o de pequenas centrais hidrel\u00e9tricas, dado produzido pela Ag\u00eancia Nacional de Energia El\u00e9trica (ANEEL). 2017 1:250.000 ANEEL Download","title":"Dados Geogr\u00e1ficos"},{"location":"01-guia_dados_geograficos/#dados-geograficos","text":"A plataforma de Risco Socioambiental visa facilitar o cruzamento de informa\u00e7\u00f5es que permitam identificar potenciais impactos ambientais e sociais ligados \u00e0 produ\u00e7\u00e3o agr\u00edcola no Brasil, permitindo \u00e0s institui\u00e7\u00f5es financeiras, empresas, governos e outras partes interessadas entender melhor e mitigar os riscos associados \u00e0 produ\u00e7\u00e3o agropecu\u00e1ria. A sua abordagem baseia-se em apresentar um conjunto de indicadores em um mapa interativo de f\u00e1cil navega\u00e7\u00e3o, e relat\u00f3rios que trazem s\u00e9ries hist\u00f3ricas destes dados. Na plataforma, os usu\u00e1rios podem realizar buscas, visualizar os dados de seu interesse, recuperar os mesmos e gerar relat\u00f3rios. A unidade de refer\u00eancia s\u00e3o os munic\u00edpios, mas tamb\u00e9m \u00e9 poss\u00edvel fazer an\u00e1lises por estados, biomas e regi\u00f5es espec\u00edficas.","title":"Dados Geogr\u00e1ficos"},{"location":"01-guia_dados_geograficos/#agricultura","text":"Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1rea Plantada de Algod\u00e3o \u00c1reas de planta\u00e7\u00e3o de algod\u00e3o em caro\u00e7o por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea plantada de cana-de-a\u00e7\u00facar \u00c1reas de planta\u00e7\u00e3o de cana-de-a\u00e7\u00facar por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea Plantada de Milho \u00c1reas de planta\u00e7\u00e3o de Milho em gr\u00e3o por munic\u00edpios do Brasil, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1rea Plantada de Soja \u00c1reas de planta\u00e7\u00e3o de Soja em gr\u00e3o, por hectares, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download \u00c1reas de queimadas Dados de queimadas ocorridos no Brasil, para o per\u00edodo de 2002 \u00e0 2015, produzidos a partir de imagens MODIS (MCD45A1). 2002-2015 1:250.000 LAPIG Download Armaz\u00e9ns N\u00famero de armaz\u00e9ns destinados a armazenamento e controle de produ\u00e7\u00e3o no Brasil. Gerado a partir da compila\u00e7\u00e3o de dados da Agrosat\u00e9lite e da CONAB \u2013 Companhia Nacional de Abastecimento, espacializados pelo LAPIG \u2013 Laborat\u00f3rio de Processamento de Imagens e Geoporcessamento. 2017 1:250.000 LAPIG Download Assentamentos Rurais Localiza\u00e7\u00e3o dos assentamentos rurais, produzido pelo Instituto Nacional de Coloniza\u00e7\u00e3o e Reforma Agr\u00e1ria (INCRA). 2015 1:250.000 INCRA Download Desmatamento Dados de desmatamentos ocorridos, produzidos a partir de compila\u00e7\u00e3o de dados do PRODES(Bioma Amaz\u00f4nia: 2005 - 2016), SIAD(Bioma Cerrado: 2003 - 2016) e SOS Mata Atl\u00e2ntica(Bioma Mata Atl\u00e2ntica: 2011 - 2016). 2003-2016 1:250.000 PRODES Download Desmatamento Acumulado Desmatamento acumulado nos \u00faltimos 5 anos (2012 a 2016), nos Biomas Amaz\u00f4nia, Cerrado e Mata atl\u00e2ntica. Utilizando dados do PRODES/INPE para a Amaz\u00f4nia, SIAD/LAPIG para o Cerrado, SOS Mata Atl\u00e2ntica para a Mata Atl\u00e2ntica. 2016 1:250.000 LAPIG Download Floresta plantada Dados produzido pela ONG Transparent World com o apoio do WRI, com abrang\u00eancia territorial para todo o Brasil. 2014 1:250.000 WRI Download Piv\u00f4s centrais Mapeamento realizado pela Embrapa da \u00e1rea irrigada e do n\u00famero de equipamentos de irriga\u00e7\u00e3o por piv\u00f4 central no Brasil em 2013. 2013 1:250.000 EMBRAPA Download Produ\u00e7\u00e3o de Algod\u00e3o - ton Quantidade de algod\u00e3o em caro\u00e7o produzido por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de cana-de-a\u00e7\u00facar - ton Quantidade de cana-de-a\u00e7\u00facar produzida por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Lenha - m\u00b3 Quantidade de Lenha produzida por munic\u00edpios do brasil, em Metros C\u00fabicos, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Milho - ton Quantidade de milho em gr\u00e3o produzido por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Produ\u00e7\u00e3o de Soja - ton Quantidade de soja em gr\u00e3o produzida por munic\u00edpios do brasil, em Toneladas, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download","title":"Agricultura"},{"location":"01-guia_dados_geograficos/#pecuaria","text":"Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas de pastagens Mapeamento de \u00e1reas de pastagem, a partir de compila\u00e7\u00e3o de dados TerraClass Amazon; Funcate; PROBIO; Canasat e TNC. A \u00e1rea de pastagem mapeada \u00e9 de 175.396.874 ha, os mapeamentos que comp\u00f5em s\u00e3o: Bioma Pantanal - Mapeamento da Bacia do Alto Paraguai para 2014; Bioma Caatinga ( Mapeamento Lapig - Vers\u00e3o 2 2014-2016) - Esse mapeamento classificou as \u00e1reas de pasto limpo, pasto sujo e \u00e1rea degradada (solo exposto); Bioma Mata Atl\u00e2ntica (Mapeamento Lapig 2014-2016) - Esse mapeamento classificou as \u00e1reas de pasto limpo, pasto sujo e \u00e1rea degradada (solo exposto); Bioma Pampa - Mapeamento realizado pelo IBGE para o estado do Rio Grande do Sul (2012); Bioma Amaz\u00f4nia - Mapeamento TerraClass Amaz\u00f4nia 2014; Bioma Cerrado - Mapeamento TerraClass Cerrado 2013. 2016 1:250.000 LAPIG Download \u00c1reas de queimadas Dados de queimadas ocorridos no Brasil, para o per\u00edodo de 2002 \u00e0 2016, produzidos a partir de imagens MODIS (MCD45A1). 2002-2016 1:250.000 LAPIG Download Desmatamento Dados de desmatamentos ocorridos, produzidos a partir de compila\u00e7\u00e3o de dados do PRODES(Bioma Amaz\u00f4nia: 2005 - 2016), SIAD(Bioma Cerrado: 2003 - 2016) e SOS Mata Atl\u00e2ntica(Bioma Mata Atl\u00e2ntica: 2011 - 2016). 2003-2016 1:250.000 PRODES Download Desmatamento Acumulado Desmatamento acumulado nos \u00faltimos 5 anos (2012 a 2016), nos Biomas Amaz\u00f4nia, Cerrado e Mata atl\u00e2ntica. Utilizando dados do PRODES/INPE para a Amaz\u00f4nia, SIAD/LAPIG para o Cerrado, SOS Mata Atl\u00e2ntica para a Mata Atl\u00e2ntica. 2016 1:250.000 LAPIG Download Frigor\u00edficos e matadouros Dado produzido a partir de informa\u00e7\u00f5es de Matadouros e/ou Frigor\u00edficos Bovinos do Brasil aptos a exporta\u00e7\u00e3o, inspecionados visualmente pelo LAPIG. 2017 1:250.000 LAPIG Download Produ\u00e7\u00e3o de leite - lt Quantidade de leite em litros produzido por munic\u00edpios do brasil, no per\u00edodo de 2000 a 2015, conforme dados censit\u00e1rios do IBGE. 2000-2015 1:250.000 IBGE Download Rebanho bovino Quantidade de bovinos nos munic\u00edpios brasileiros. Informa\u00e7\u00e3o produzida pelo Instituto Brasileiro de Geografia e Estat\u00edstica (IBGE) e espacializada pelo LAPIG. 2000-2015 1:250.000 IBGE Download","title":"Pecu\u00e1ria"},{"location":"01-guia_dados_geograficos/#social","text":"Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas de terras ind\u00edgenas \u00c1reas de terras ind\u00edgenas brasileiras incluindo situa\u00e7\u00e3o (regularizada, delimitada, etc), produzidos pela Funda\u00e7\u00e3o Nacional do \u00cdndio (FUNAI). 2012 1:250.000 FUNAI Download \u00c1reas Embargadas \u00c1reas que sofrer\u00e3o san\u00e7\u00f5es administrativas e/ou medidas cautelar, tendo por objetivo propiciar a regenera\u00e7\u00e3o do meio ambiente e dar viabilidade \u00e0 recupera\u00e7\u00e3o da \u00e1rea degradada, fonte IBAMA. 2017 1:250.000 LAPIG Download Conflitos por \u00e1gua (n\u00b0 ocorr\u00eancias) N\u00famero de ocorr\u00eancias de a\u00e7\u00f5es de resist\u00eancia por munic\u00edpio, em geral coletivas, que visam garantir o uso e a preserva\u00e7\u00e3o das \u00e1guas, no per\u00edodo de 2006 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2006-2015 1:250.000 CPT Download Conflitos por terra (n\u00b0 ocorr\u00eancias) N\u00famero de conflitos por munic\u00edpio em a\u00e7\u00f5es de resist\u00eancia e enfrentamento pela posse, uso e propriedade da terra e pelo acesso aos recursos naturais, no per\u00edodo de 2010 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2010-2015 1:250.000 CPT Download Conflitos por terra (n\u00b0 pessoas) N\u00famero de pessoas envolvidas em conflitos ocorridos por munic\u00edpio, em a\u00e7\u00f5es de resist\u00eancia e enfrentamento pela posse, uso e propriedade da terra e pelo acesso aos recursos naturais, no per\u00edodo de 2010 \u00e1 2015, produzidos pela CPT - Comiss\u00e3o Pastoral da Terra - espacializados pelo Lapig. 2010-2015 1:250.000 CPT Download \u00cdndice de Desenvolvimento Humano \u00cdndice de Desenvolvimento Humano Municipal, calculado pela m\u00e9dia geom\u00e9trica dos \u00edndices das dimens\u00f5es de Renda, Educa\u00e7\u00e3o e Longevidade. Esse c\u00e1lculo foi realizado a partir das informa\u00e7\u00f5es dos 3 \u00faltimos Censos Demogr\u00e1ficos do IBGE \u2013 1991, 2000 e 2010 e espacializado pelo LAPIG. 1991/ 2000/ 2010 1:250.000 IBGE Download Quilombos \u00c1reas de Quilombos que possuem titula\u00e7\u00e3o de territ\u00f3rios quilombolas, produzido pelo Instituto Nacional de Coloniza\u00e7\u00e3o e Reforma Agr\u00e1ria (INCRA). 2015 1:250.000 INCRA Download Terras ind\u00edgenas Quantidade de terras ind\u00edgenas por munic\u00edpio do Brasil at\u00e9 o ano de 2015, segundo dados produzidos pela Funda\u00e7\u00e3o Nacional do \u00cdndio(FUNAI) e espacializados pelo LAPIG. 2015 1:250.000 FUNAI Download Trabalho Escravo N\u00famero de pessoas envolvidas por munic\u00edpio, em a\u00e7\u00f5es de trabalhos for\u00e7ados, jornada exaustiva ou por sujeit\u00e1-lo \u00e1 condi\u00e7\u00f5es degradantes de trabalho, no per\u00edodo de 2000/2002 e de 2008 a 2016, produzidos pela Comiss\u00e3o Pastoral da Terra (CPT) e espacializados pelo LAPIG. 2000-2016 1:250.000 CPT Download","title":"Social"},{"location":"01-guia_dados_geograficos/#ambiental","text":"Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado \u00c1reas priorit\u00e1rias para conserva\u00e7\u00e3o da biodiversidade Revis\u00e3o de \u00e1reas priorit\u00e1rias para a conserva\u00e7\u00e3o da biodiversidade, classificadas quanto a import\u00e2ncia biol\u00f3gica. Produzido pelo Minit\u00e9rio do Meio Ambiente (MMA) 2007 1:250.000 MMA Download Cobertura vegetal remanescente Compila\u00e7\u00e3o de mapeamentos de vegeta\u00e7\u00e3o nativa organizado pelo LAPIG/UFG.Para o bioma Amaz\u00f4nia considerou-se os dados do TerraClass Amaz\u00f4nia, com refer\u00eancia em 2012. Para o bioma Cerrado utilizou-se os dados TerraClass Cerrado, com refer\u00eancia em 2012. Os dados produzidos pela SOS Mata Atl\u00e2ntica, com refer\u00eancia em 2014, foram utilizados no bioma Mata Atl\u00e2ntica. O Mapeamento da cobertura vegetal da Bacia do Alto Paraguai, com refer\u00eancia em 2014, foi utilizado para o bioma Pantanal. Nos biomas Caatinga e Pampa considerou-se os dados produzidos no \u00e2mbito do PMDBBS, com refer\u00eancia em 2008 2014 1:250.000 LAPIG Download Corpos d'\u00e1gua Mapeamento dos corpos de \u00e1gua dos biomas: Caatinga (2008/2009), Mata Atl\u00e2ntica (2008/2009), Cerrado (2008/2009/2010), Pampa (2008/2009) e Pantanal (2008/2009) com base no Projeto de Monitoramento do Desmatamento dos Biomas Brasileiros por Sat\u00e9lite (PMDBBS). 2009 1:250.000 PMDBBS Download D\u00e9ficit de APP Dado produzido pelo CSR/UFMG e LAGESA/UFMG com o apoio da Climate and Land Use Alliance, com abrang\u00eancia territorial para todo Brasil. 2014 1:250.000 CSR/UFMG Download D\u00e9ficit de Reserva Legal Dado produzido pelo CSR/UFMG e LAGESA/UFMG com o apoio da Climate and Land Use Alliance, com abrang\u00eancia territorial para todo Brasil. 2014 1:250.000 CSR/UFMG Download D\u00e9ficit h\u00eddrico Dados acumulados do ano de 2012 do m\u00e1ximo de \u00e1gua doce dispon\u00edvel para infiltra\u00e7\u00e3o e escoamento (Blue Water) para as ottobacias de n\u00edvel 6 localizadas no Brasil, produzidos a partir de imagens do produto MOD16A2 e sat\u00e9lite TRMM. 2012 1:250.000 LAPIG Download Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral Localiza\u00e7\u00e3o das unidades de conserva\u00e7\u00e3o de prote\u00e7\u00e3o integral brasileiras, incluindo a Base ao Milion\u00e9simo do IBGE de 2014. 2014 1:250.000 IBGE Download","title":"Ambiental"},{"location":"01-guia_dados_geograficos/#economico","text":"Dado Descri\u00e7\u00e3o Data Escala Fonte Baixar dado Centrais hidrel\u00e9tricas Localiza\u00e7\u00e3o de pequenas centrais hidrel\u00e9tricas, dado produzido pela Ag\u00eancia Nacional de Energia El\u00e9trica (ANEEL). 2017 1:250.000 ANEEL Download","title":"Econ\u00f4mico"},{"location":"01-guia_funcionalidades/","text":"Funcionalidades A abordagem da plataforma baseia-se em apresentar um vasto conjunto de dados secund\u00e1rios relevantes (fontes oficiais e dados de refer\u00eancia) em um mapa interativo de f\u00e1cil navega\u00e7\u00e3o. Todos os indicadores est\u00e3o listados com seus respectivos valores na p\u00e1gina inicial da plataforma, promovendo assim o acesso mais r\u00e1pido a informa\u00e7\u00e3o. Dashboard O dashboard da Plataforma Risco Socioambiental \u00e9 formado por quatro elementos principais: 1 - Indicadores A unidade de refer\u00eancia s\u00e3o os munic\u00edpios, mas tamb\u00e9m \u00e9 poss\u00edvel fazer an\u00e1lises considerando todo o territ\u00f3rio nacional, estados, biomas e regi\u00f5es espec\u00edficas de interesse (como o Matopiba e Arco do Desmatamento). Os indicadores tamb\u00e9m podem ser agrupados por categorias (Agricultura, Ambiental, Econ\u00f4mico, Natural, Pecu\u00e1ria e Social). Conforme os filtros de \u00e1rea s\u00e3o aplicados, os valores s\u00e3o atualizados para regi\u00e3o selecionada. Tamb\u00e9m \u00e9 poss\u00edvel visualizar o percentual do indicador sob a \u00e1rea total da regi\u00e3o. Como \u00e9 ilustrado na imagem logo abaixo, o Brasil possui 175.361.556 hectares de \u00e1reas de pastagens, o que equivale a 20,63% de toda \u00e1rea nacional. 2 - Mapa interativo \u00c1rea onde todos os indicadores contidos na plataforma podem ser visualizados no mapa para an\u00e1lises e compara\u00e7\u00f5es com outros indicadores. Na imagem seguinte temos um exemplo de visualiza\u00e7\u00e3o de indicadores no mapa: indicadores de \u00e1reas de pastagens na cor amarela e frigor\u00edficos na cor vermelha. 3 - Controle de Visualiza\u00e7\u00e3o Permite o controle do n\u00edvel de zoom do mapa, al\u00e9m de ocultar e ativar a visualiza\u00e7\u00e3o da lista de indicadores, controle das legendas dos dados ativos no mapa. O mapa base (refere ao fundo do mapa fornecendo o contexto geogr\u00e1fico para as camadas adicionais) tamb\u00e9m pode ser alterado conforme a necessidade de an\u00e1lise do usu\u00e1rio. E por \u00faltimo, o \u00edcone de lupa ferramenta para pesquisa de propriedade por meio do c\u00f3digo do Cadastro Ambiental Rural - CAR. 4 - Legenda As legendas dos dados ativos no mapa contam com um controle de visualiza\u00e7\u00e3o, sobreposi\u00e7\u00e3o de camadas e tamb\u00e9m opacidade o que contribui para uma melhor an\u00e1lise do usu\u00e1rio. Ferramenta de pesquisa por propriedade do CAR O \u00edcone de lupa \u00e9 uma ferramenta desenvolvida para pesquisa de propriedade por meio do c\u00f3digo do Cadastro Ambiental Rural - CAR. Ao inserir um c\u00f3digo de propriedade o limite \u00e9 evidenciado no mapa e o usu\u00e1rio pode selecionar os indicadores que deseja analisar. Ferramenta de Gerar Relat\u00f3rio Um dos recursos mais importantes da plataforma \u00e9 o \"Gerar relat\u00f3rio\", que traz em formato de gr\u00e1fico as s\u00e9ries hist\u00f3ricas do(s) dado(s) selecionado(s) para uma determinada regi\u00e3o definida pelo usu\u00e1rio. Caso o dado n\u00e3o seja temporal, o valor \u00e9 mostrado apenas para o ano de cria\u00e7\u00e3o do indicador, como \u00e9 o caso do dado de Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral (2014), Frigor\u00edficos e Matadouros (2017) e Floresta Plantada(2014). Relat\u00f3rio em formato de gr\u00e1fico da produ\u00e7\u00e3o de soja em toneladas, mostrando a sua evolu\u00e7\u00e3o temporal (2000 a 2015) na regi\u00e3o do bioma Cerrado. Destaca-se tamb\u00e9m a possibilidade de visualizar o ranking dos 10 primeiros e 10 \u00faltimos Munic\u00edpios para o indicador escolhido, levando em considera\u00e7\u00e3o o ano e regi\u00e3o selecionada. O ranking apresenta a posi\u00e7\u00e3o, nome do munic\u00edpio, Unidade Federativa (UF) e valor do indicador. Ferramenta de Download de propriedades Sicar Ferramenta acess\u00edvel por meio do link . Ferramenta de Download Por fim, os usu\u00e1rios podem fazer o download dos indicadores em formato shapefile (SHP) ou CSV, assim como recuperar o relat\u00f3rio em formato CSV.","title":"Funcionalidades"},{"location":"01-guia_funcionalidades/#funcionalidades","text":"A abordagem da plataforma baseia-se em apresentar um vasto conjunto de dados secund\u00e1rios relevantes (fontes oficiais e dados de refer\u00eancia) em um mapa interativo de f\u00e1cil navega\u00e7\u00e3o. Todos os indicadores est\u00e3o listados com seus respectivos valores na p\u00e1gina inicial da plataforma, promovendo assim o acesso mais r\u00e1pido a informa\u00e7\u00e3o.","title":"Funcionalidades"},{"location":"01-guia_funcionalidades/#dashboard","text":"O dashboard da Plataforma Risco Socioambiental \u00e9 formado por quatro elementos principais: 1 - Indicadores A unidade de refer\u00eancia s\u00e3o os munic\u00edpios, mas tamb\u00e9m \u00e9 poss\u00edvel fazer an\u00e1lises considerando todo o territ\u00f3rio nacional, estados, biomas e regi\u00f5es espec\u00edficas de interesse (como o Matopiba e Arco do Desmatamento). Os indicadores tamb\u00e9m podem ser agrupados por categorias (Agricultura, Ambiental, Econ\u00f4mico, Natural, Pecu\u00e1ria e Social). Conforme os filtros de \u00e1rea s\u00e3o aplicados, os valores s\u00e3o atualizados para regi\u00e3o selecionada. Tamb\u00e9m \u00e9 poss\u00edvel visualizar o percentual do indicador sob a \u00e1rea total da regi\u00e3o. Como \u00e9 ilustrado na imagem logo abaixo, o Brasil possui 175.361.556 hectares de \u00e1reas de pastagens, o que equivale a 20,63% de toda \u00e1rea nacional. 2 - Mapa interativo \u00c1rea onde todos os indicadores contidos na plataforma podem ser visualizados no mapa para an\u00e1lises e compara\u00e7\u00f5es com outros indicadores. Na imagem seguinte temos um exemplo de visualiza\u00e7\u00e3o de indicadores no mapa: indicadores de \u00e1reas de pastagens na cor amarela e frigor\u00edficos na cor vermelha. 3 - Controle de Visualiza\u00e7\u00e3o Permite o controle do n\u00edvel de zoom do mapa, al\u00e9m de ocultar e ativar a visualiza\u00e7\u00e3o da lista de indicadores, controle das legendas dos dados ativos no mapa. O mapa base (refere ao fundo do mapa fornecendo o contexto geogr\u00e1fico para as camadas adicionais) tamb\u00e9m pode ser alterado conforme a necessidade de an\u00e1lise do usu\u00e1rio. E por \u00faltimo, o \u00edcone de lupa ferramenta para pesquisa de propriedade por meio do c\u00f3digo do Cadastro Ambiental Rural - CAR. 4 - Legenda As legendas dos dados ativos no mapa contam com um controle de visualiza\u00e7\u00e3o, sobreposi\u00e7\u00e3o de camadas e tamb\u00e9m opacidade o que contribui para uma melhor an\u00e1lise do usu\u00e1rio.","title":"Dashboard"},{"location":"01-guia_funcionalidades/#ferramenta-de-pesquisa-por-propriedade-do-car","text":"O \u00edcone de lupa \u00e9 uma ferramenta desenvolvida para pesquisa de propriedade por meio do c\u00f3digo do Cadastro Ambiental Rural - CAR. Ao inserir um c\u00f3digo de propriedade o limite \u00e9 evidenciado no mapa e o usu\u00e1rio pode selecionar os indicadores que deseja analisar.","title":"Ferramenta de pesquisa por propriedade do CAR"},{"location":"01-guia_funcionalidades/#ferramenta-de-gerar-relatorio","text":"Um dos recursos mais importantes da plataforma \u00e9 o \"Gerar relat\u00f3rio\", que traz em formato de gr\u00e1fico as s\u00e9ries hist\u00f3ricas do(s) dado(s) selecionado(s) para uma determinada regi\u00e3o definida pelo usu\u00e1rio. Caso o dado n\u00e3o seja temporal, o valor \u00e9 mostrado apenas para o ano de cria\u00e7\u00e3o do indicador, como \u00e9 o caso do dado de Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral (2014), Frigor\u00edficos e Matadouros (2017) e Floresta Plantada(2014). Relat\u00f3rio em formato de gr\u00e1fico da produ\u00e7\u00e3o de soja em toneladas, mostrando a sua evolu\u00e7\u00e3o temporal (2000 a 2015) na regi\u00e3o do bioma Cerrado. Destaca-se tamb\u00e9m a possibilidade de visualizar o ranking dos 10 primeiros e 10 \u00faltimos Munic\u00edpios para o indicador escolhido, levando em considera\u00e7\u00e3o o ano e regi\u00e3o selecionada. O ranking apresenta a posi\u00e7\u00e3o, nome do munic\u00edpio, Unidade Federativa (UF) e valor do indicador.","title":"Ferramenta de Gerar Relat\u00f3rio"},{"location":"01-guia_funcionalidades/#ferramenta-de-download-de-propriedades-sicar","text":"Ferramenta acess\u00edvel por meio do link .","title":"Ferramenta de Download de propriedades Sicar"},{"location":"01-guia_funcionalidades/#ferramenta-de-download","text":"Por fim, os usu\u00e1rios podem fazer o download dos indicadores em formato shapefile (SHP) ou CSV, assim como recuperar o relat\u00f3rio em formato CSV.","title":"Ferramenta de Download"},{"location":"02-arq_execucao_risco/","text":"Introdu\u00e7\u00e3o Conforme detalhado na se\u00e7\u00e3o Arquitetura de Software , para execu\u00e7\u00e3o da plataforma Risco Socioambiental \u00e3o necess\u00e1rias 4 estruturas criadas e funcionais na m\u00e1quina do usu\u00e1rio: O Banco de Dados wwf-sicar restaurado no servi\u00e7o do MONGODB. O servi\u00e7o OWS Server devidamente configurado e executando em um IP e porta. O Application Server e client (Front-end) da aplica\u00e7\u00e3o compilados e executando. O Banco de Dados indicadores.sqlite na pasta /storage/catalog/Ocultos, criada pelo script de inicializa\u00e7\u00e3o . Deployment da aplica\u00e7\u00e3o RISCOSOCIOAMBIENTAL e OWS Server A fim facilitar/automatizar todo o processo de execu\u00e7\u00e3o do Risco Socioambiental e do OWS Server foi criado um script que executa todos os passos necess\u00e1rios. Este script dever\u00e1 executar as seguintes tarefas: Download do cont\u00e2iner do CONTAINER_OWS.tar.gz Download do cont\u00e2iner do CONTAINER_SOCIOAMBIENTAL.tar.gz Download do cont\u00e2iner do CONTAINER_MONGODB.tar.gz Cria a estrutura de pastas necess\u00e1rias (ows-cache, catalog, Ocultos e riscosocioambiental) para funcionamento do OWS Server e riscosocioambiental Constr\u00f3i a aplica\u00e7\u00e3o do OWS Server e a disponibiliza em um IP e porta. Constr\u00f3i a aplica\u00e7\u00e3o do RISCOSOCIOAMBIENTAL e a disponibiliza em um IP e porta. Constr\u00f3i a aplica\u00e7\u00e3o do MONGODB-SERVER e a disponibiliza em um IP e porta. Conforme mencionado anteriormente, a estrutura do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER foi constru\u00edda com o apoio do Docker , portanto para instala\u00e7\u00e3o do mesmo, deve-se seguir os passos definidos nos tutoriais de acordo com o sistema operacional, seja ele Debian ou CentOS . Al\u00e9m do Docker, o script tamb\u00e9m faz uso das seguintes depend\u00eancias: Depend\u00eancia Tutorial para Instala\u00e7\u00e3o Perl https://learn.perl.org/installing/unix_linux.html wget https://www.cyberciti.biz/faq/how-to-install-wget-togetrid-of-error-bash-wget-command-not-found/ curl https://www.cyberciti.biz/faq/how-to-install-curl-command-on-a-ubuntu-linux/ Git https://gist.github.com/derhuerst/1b15ff4652a867391f03 Ap\u00f3s instala\u00e7\u00e3o do Docker e das depend\u00eancias m\u00ednimas para o script, deve-se executar o script [ start-socio+ows.sh ] (https://drive.google.com/file/d/1YnTOs3A0ZA-DvtO2hqSHACSRuJGv99Op/view?usp=sharing) atrav\u00e9s do comando: $ ./start-socio+ows.sh Inicialmente o script ir\u00e1 pedir ao usu\u00e1rio que informe o local onde o OWS Server e RISCOSOCIOAMBIENTAL dever\u00e1 criar a estrutura de pastas necess\u00e1rias para funcionamento. Na imagem abaixo, o usu\u00e1rio ter\u00e1 informado o caminho /data/containers . \u00c9 importante ressaltar que este dever\u00e1 ser um caminho v\u00e1lido na m\u00e1quina do usu\u00e1rio. Em seguida, deve-se informar o diret\u00f3rio onde o cache gerado pelo OWS Server dever\u00e1 ser armazenado. Na imagem abaixo, o usu\u00e1rio ter\u00e1 informado novamente o caminho /storage . por\u00e9m, como o OWS Server est\u00e1 armazenado em um cont\u00e2iner Docker, o script ir\u00e1 mapear automaticamente este caminho para /STORAGE dentro da estrutura do Docker. Ap\u00f3s a inicializa\u00e7\u00e3o das vari\u00e1veis necess\u00e1rias, o script ir\u00e1 realizar automaticamente o download do cont\u00e2iner do OWS Server, RISCOSOCIOAMBIENTAL,MONGODB-SERVER e import\u00e1-los corretamente no Docker instalado na m\u00e1quina do usu\u00e1rio. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, o OWS Server dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 5000 . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do curl no endere\u00e7o http://127.0.0.1:5000/ows , que recebe uma pequena p\u00e1gina HTML criada pelo MapServer. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, a plataforma RISCOSOCIOAMBIENTAL dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 2000 . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do NAVEGADOR no endere\u00e7o http://127.0.0.1:2000 , que recebe a p\u00e1gina do RISCOSOCIOAMBIENTAL. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, o MONGODB-SERVER dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 3000 para o acesso WEB de gerencia e 27017 de acesso ao Banco de Dados . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do NAVEGADOR no endere\u00e7o http://127.0.0.1:3000 , que recebe a p\u00e1gina do adminMongo. Ap\u00f3s a execu\u00e7\u00e3o do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER tamb\u00e9m \u00e9 necess\u00e1rio mover o indicadores.sqlite presentes no link para dentro da pasta /storage/catalog/Ocultos criada no caminho informado pelo usu\u00e1rio no in\u00edcio do script. Por fim, vale ressaltar que uma vez que o cont\u00e2iner do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER esteja configurado e funcionando n\u00e3o \u00e9 mais necess\u00e1rio executar o script start-socio+ows.sh . J\u00e1 existe um script na raiz do cont\u00e2iner, nomeado start.sh , que \u00e9 respons\u00e1vel por executar o OWS Server imediatamente ap\u00f3s o cont\u00e2iner ser inicializado. OBS: Dentro da pasta /catalog/Ocultos/ deve existir os dois arquivos indicadores.sqlite e indicadores.map , caso nao exista os dois nao ir\u00e1 funcionar a aplica\u00e7\u00e3o. ATEN\u00c7\u00c3O: Ap\u00f3s o script finalizar por completo e todos os containers forem criados, deve-se copiar o arquivo indicadores.sqlite para dentro do diret\u00f3rio escolhido pelo usu\u00e1rio durante a execu\u00e7\u00e3o do script, o arquivo deve ficar em /$DIRETORIO_ESCOLHIDO_PELO_USUARIO/storage/catalog/Ocultos, logo ap\u00f3s copiar o mesmo deve ser reiniciado a aplica\u00e7\u00e3o para ela poder encontrar este arquivo essencial para seu funcionamento. $ docker restart APP_SOCIOAMBIENTAL Para verificar os logs gerados pelo OWS-SERVER deve-se entrar no cont\u00e2iner do OWS-SERVER e verificar o arquivo ows-mapserv.log , tais a\u00e7\u00f5es podem ser alcan\u00e7adas com a execu\u00e7\u00e3o dos passos abaixo: $ docker exec -it OWS bash $ cd /APP/lapig-maps/src/ows/log $ tail -f ows-mapserv.log Em seguida, para verficar os logs gerados pela aplica\u00e7\u00e3o Risco Socioambiental, \u00e9 necess\u00e1rio entrar no cont\u00e2iner APP_SOCIOAMBIENTAL e verificar o arquivo app.out . Para tal, basta executar: $ docker exec -it APP_SOCIOAMBIENTAL bash $ cd /APP/riscosocioambiental/server $ tail -f app.out Por fim, caso deseje verificar se o banco Mongo (MONGODB-SERVER) foi restaurado com sucesso, basta executar: $ docker exec -it APP_SOCIOAMBIENTAL bash $ cd /APP/dump $ cat log-restore.out Cria\u00e7\u00e3o do Ambiente de Desenvolvimento A seguir ser\u00e1 abordado como executar a aplica\u00e7\u00e3o RISCOSOCIOAMBIENTAL em ambiente de Desenvolvimento. Para o ambiente de desenvolvimento ser\u00e1 detalhado um passo a passo partindo do pressuposto que um programador ir\u00e1 dar manuten\u00e7\u00e3o ou continuidade no RISCOSOCIOAMBIENTAL. J\u00e1 o ambiente de produ\u00e7\u00e3o, ser\u00e1 disponibilizado via script que executa todos os passos para disponibilizar o RISCOSOCIOAMBIENTAL em uma porta da m\u00e1quina que est\u00e1 sendo executado. Assim como abordado na se\u00e7\u00e3o , o RISCOSOCIOAMBIENTAL foi constru\u00eddo com NodeJS como Application Server e Angular como cliente ( WebMap Client ). Portanto, primeiramente \u00e9 necess\u00e1ria a instala\u00e7\u00e3o destes componentes na m\u00e1quina do desenvolvedor. Para tal, pode-se seguir o passo-a-passo elaborado neste link Para execu\u00e7\u00e3o do RISCOSOCIOAMBIENTAL em ambiente de desenvolvimento, primeiramente \u00e9 necess\u00e1rio realizar um fork do projeto para a sua conta pessoal do Github e em seguida executar um git clone do reposit\u00f3rio do projeto . Para inicializar o servidor de aplica\u00e7\u00e3o ( Application Server ) deve-se executar o passo-a-passo descrito na se\u00e7\u00e3o . A execu\u00e7\u00e3o da mesma ir\u00e1 inicializar o Application Server em localhost na porta 3000. Para verificar o seu funcionamento, pode-se realizar a requisi\u00e7\u00e3o abaixo em um navegador qualquer, que dever\u00e1 apresentar um resultado semelhante a este . http://localhost:3000/service/indicadores/lista Em seguida, para inicializar o WebMap Client localizado na pasta src/client , basta navegar at\u00e9 a pasta client e instalar as depend\u00eancias listadas no package.json atrav\u00e9s do comando: $ npm install Ap\u00f3s a devida instala\u00e7\u00e3o das depend\u00eancias, pode-se ent\u00e3o compilar e inicializar a aplica\u00e7\u00e3o. Mais uma vez, a fim de facilitar, foi criado um script start.sh para inicializar o WebMap Client , portanto basta executar: $ ./src/client/start.sh Ao finalizar a compila\u00e7\u00e3o do projeto, a aplica\u00e7\u00e3o estar\u00e1 executando em localhost na porta padr\u00e3o do Angular, que \u00e9 a porta 4200. Portanto, para acessar a p\u00e1gina Web criada pela aplica\u00e7\u00e3o, acesse pelo navegador: http://localhost:4200 Ap\u00f3s execu\u00e7\u00e3o dos scripts o OWS Server estar\u00e1 executando na m\u00e1quina do usu\u00e1rio na porta 5000 e o RISCOSOCIOAMBIENTAL tamb\u00e9m na m\u00e1quina do usu\u00e1rio na porta 3000 .","title":"Deployment da arquitetura do Riscosocioambiental"},{"location":"02-arq_execucao_risco/#introducao","text":"Conforme detalhado na se\u00e7\u00e3o Arquitetura de Software , para execu\u00e7\u00e3o da plataforma Risco Socioambiental \u00e3o necess\u00e1rias 4 estruturas criadas e funcionais na m\u00e1quina do usu\u00e1rio: O Banco de Dados wwf-sicar restaurado no servi\u00e7o do MONGODB. O servi\u00e7o OWS Server devidamente configurado e executando em um IP e porta. O Application Server e client (Front-end) da aplica\u00e7\u00e3o compilados e executando. O Banco de Dados indicadores.sqlite na pasta /storage/catalog/Ocultos, criada pelo script de inicializa\u00e7\u00e3o .","title":"Introdu\u00e7\u00e3o"},{"location":"02-arq_execucao_risco/#deployment-da-aplicacao-riscosocioambiental-e-ows-server","text":"A fim facilitar/automatizar todo o processo de execu\u00e7\u00e3o do Risco Socioambiental e do OWS Server foi criado um script que executa todos os passos necess\u00e1rios. Este script dever\u00e1 executar as seguintes tarefas: Download do cont\u00e2iner do CONTAINER_OWS.tar.gz Download do cont\u00e2iner do CONTAINER_SOCIOAMBIENTAL.tar.gz Download do cont\u00e2iner do CONTAINER_MONGODB.tar.gz Cria a estrutura de pastas necess\u00e1rias (ows-cache, catalog, Ocultos e riscosocioambiental) para funcionamento do OWS Server e riscosocioambiental Constr\u00f3i a aplica\u00e7\u00e3o do OWS Server e a disponibiliza em um IP e porta. Constr\u00f3i a aplica\u00e7\u00e3o do RISCOSOCIOAMBIENTAL e a disponibiliza em um IP e porta. Constr\u00f3i a aplica\u00e7\u00e3o do MONGODB-SERVER e a disponibiliza em um IP e porta. Conforme mencionado anteriormente, a estrutura do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER foi constru\u00edda com o apoio do Docker , portanto para instala\u00e7\u00e3o do mesmo, deve-se seguir os passos definidos nos tutoriais de acordo com o sistema operacional, seja ele Debian ou CentOS . Al\u00e9m do Docker, o script tamb\u00e9m faz uso das seguintes depend\u00eancias: Depend\u00eancia Tutorial para Instala\u00e7\u00e3o Perl https://learn.perl.org/installing/unix_linux.html wget https://www.cyberciti.biz/faq/how-to-install-wget-togetrid-of-error-bash-wget-command-not-found/ curl https://www.cyberciti.biz/faq/how-to-install-curl-command-on-a-ubuntu-linux/ Git https://gist.github.com/derhuerst/1b15ff4652a867391f03 Ap\u00f3s instala\u00e7\u00e3o do Docker e das depend\u00eancias m\u00ednimas para o script, deve-se executar o script [ start-socio+ows.sh ] (https://drive.google.com/file/d/1YnTOs3A0ZA-DvtO2hqSHACSRuJGv99Op/view?usp=sharing) atrav\u00e9s do comando: $ ./start-socio+ows.sh Inicialmente o script ir\u00e1 pedir ao usu\u00e1rio que informe o local onde o OWS Server e RISCOSOCIOAMBIENTAL dever\u00e1 criar a estrutura de pastas necess\u00e1rias para funcionamento. Na imagem abaixo, o usu\u00e1rio ter\u00e1 informado o caminho /data/containers . \u00c9 importante ressaltar que este dever\u00e1 ser um caminho v\u00e1lido na m\u00e1quina do usu\u00e1rio. Em seguida, deve-se informar o diret\u00f3rio onde o cache gerado pelo OWS Server dever\u00e1 ser armazenado. Na imagem abaixo, o usu\u00e1rio ter\u00e1 informado novamente o caminho /storage . por\u00e9m, como o OWS Server est\u00e1 armazenado em um cont\u00e2iner Docker, o script ir\u00e1 mapear automaticamente este caminho para /STORAGE dentro da estrutura do Docker. Ap\u00f3s a inicializa\u00e7\u00e3o das vari\u00e1veis necess\u00e1rias, o script ir\u00e1 realizar automaticamente o download do cont\u00e2iner do OWS Server, RISCOSOCIOAMBIENTAL,MONGODB-SERVER e import\u00e1-los corretamente no Docker instalado na m\u00e1quina do usu\u00e1rio. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, o OWS Server dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 5000 . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do curl no endere\u00e7o http://127.0.0.1:5000/ows , que recebe uma pequena p\u00e1gina HTML criada pelo MapServer. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, a plataforma RISCOSOCIOAMBIENTAL dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 2000 . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do NAVEGADOR no endere\u00e7o http://127.0.0.1:2000 , que recebe a p\u00e1gina do RISCOSOCIOAMBIENTAL. Ap\u00f3s a importa\u00e7\u00e3o correta do cont\u00e2iner, o MONGODB-SERVER dever\u00e1 estar executando e aguardando requisi\u00e7\u00f5es em localhost ou 127.0.0.1 na porta 3000 para o acesso WEB de gerencia e 27017 de acesso ao Banco de Dados . A imagem abaixo apresenta um exemplo de requsi\u00e7\u00e3o feita atrav\u00e9s do NAVEGADOR no endere\u00e7o http://127.0.0.1:3000 , que recebe a p\u00e1gina do adminMongo. Ap\u00f3s a execu\u00e7\u00e3o do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER tamb\u00e9m \u00e9 necess\u00e1rio mover o indicadores.sqlite presentes no link para dentro da pasta /storage/catalog/Ocultos criada no caminho informado pelo usu\u00e1rio no in\u00edcio do script. Por fim, vale ressaltar que uma vez que o cont\u00e2iner do OWS Server, RISCOSOCIOAMBIENTAL e MONGODB-SERVER esteja configurado e funcionando n\u00e3o \u00e9 mais necess\u00e1rio executar o script start-socio+ows.sh . J\u00e1 existe um script na raiz do cont\u00e2iner, nomeado start.sh , que \u00e9 respons\u00e1vel por executar o OWS Server imediatamente ap\u00f3s o cont\u00e2iner ser inicializado. OBS: Dentro da pasta /catalog/Ocultos/ deve existir os dois arquivos indicadores.sqlite e indicadores.map , caso nao exista os dois nao ir\u00e1 funcionar a aplica\u00e7\u00e3o. ATEN\u00c7\u00c3O: Ap\u00f3s o script finalizar por completo e todos os containers forem criados, deve-se copiar o arquivo indicadores.sqlite para dentro do diret\u00f3rio escolhido pelo usu\u00e1rio durante a execu\u00e7\u00e3o do script, o arquivo deve ficar em /$DIRETORIO_ESCOLHIDO_PELO_USUARIO/storage/catalog/Ocultos, logo ap\u00f3s copiar o mesmo deve ser reiniciado a aplica\u00e7\u00e3o para ela poder encontrar este arquivo essencial para seu funcionamento. $ docker restart APP_SOCIOAMBIENTAL Para verificar os logs gerados pelo OWS-SERVER deve-se entrar no cont\u00e2iner do OWS-SERVER e verificar o arquivo ows-mapserv.log , tais a\u00e7\u00f5es podem ser alcan\u00e7adas com a execu\u00e7\u00e3o dos passos abaixo: $ docker exec -it OWS bash $ cd /APP/lapig-maps/src/ows/log $ tail -f ows-mapserv.log Em seguida, para verficar os logs gerados pela aplica\u00e7\u00e3o Risco Socioambiental, \u00e9 necess\u00e1rio entrar no cont\u00e2iner APP_SOCIOAMBIENTAL e verificar o arquivo app.out . Para tal, basta executar: $ docker exec -it APP_SOCIOAMBIENTAL bash $ cd /APP/riscosocioambiental/server $ tail -f app.out Por fim, caso deseje verificar se o banco Mongo (MONGODB-SERVER) foi restaurado com sucesso, basta executar: $ docker exec -it APP_SOCIOAMBIENTAL bash $ cd /APP/dump $ cat log-restore.out","title":"Deployment da aplica\u00e7\u00e3o RISCOSOCIOAMBIENTAL e OWS Server"},{"location":"02-arq_execucao_risco/#criacao-do-ambiente-de-desenvolvimento","text":"A seguir ser\u00e1 abordado como executar a aplica\u00e7\u00e3o RISCOSOCIOAMBIENTAL em ambiente de Desenvolvimento. Para o ambiente de desenvolvimento ser\u00e1 detalhado um passo a passo partindo do pressuposto que um programador ir\u00e1 dar manuten\u00e7\u00e3o ou continuidade no RISCOSOCIOAMBIENTAL. J\u00e1 o ambiente de produ\u00e7\u00e3o, ser\u00e1 disponibilizado via script que executa todos os passos para disponibilizar o RISCOSOCIOAMBIENTAL em uma porta da m\u00e1quina que est\u00e1 sendo executado. Assim como abordado na se\u00e7\u00e3o , o RISCOSOCIOAMBIENTAL foi constru\u00eddo com NodeJS como Application Server e Angular como cliente ( WebMap Client ). Portanto, primeiramente \u00e9 necess\u00e1ria a instala\u00e7\u00e3o destes componentes na m\u00e1quina do desenvolvedor. Para tal, pode-se seguir o passo-a-passo elaborado neste link Para execu\u00e7\u00e3o do RISCOSOCIOAMBIENTAL em ambiente de desenvolvimento, primeiramente \u00e9 necess\u00e1rio realizar um fork do projeto para a sua conta pessoal do Github e em seguida executar um git clone do reposit\u00f3rio do projeto . Para inicializar o servidor de aplica\u00e7\u00e3o ( Application Server ) deve-se executar o passo-a-passo descrito na se\u00e7\u00e3o . A execu\u00e7\u00e3o da mesma ir\u00e1 inicializar o Application Server em localhost na porta 3000. Para verificar o seu funcionamento, pode-se realizar a requisi\u00e7\u00e3o abaixo em um navegador qualquer, que dever\u00e1 apresentar um resultado semelhante a este . http://localhost:3000/service/indicadores/lista Em seguida, para inicializar o WebMap Client localizado na pasta src/client , basta navegar at\u00e9 a pasta client e instalar as depend\u00eancias listadas no package.json atrav\u00e9s do comando: $ npm install Ap\u00f3s a devida instala\u00e7\u00e3o das depend\u00eancias, pode-se ent\u00e3o compilar e inicializar a aplica\u00e7\u00e3o. Mais uma vez, a fim de facilitar, foi criado um script start.sh para inicializar o WebMap Client , portanto basta executar: $ ./src/client/start.sh Ao finalizar a compila\u00e7\u00e3o do projeto, a aplica\u00e7\u00e3o estar\u00e1 executando em localhost na porta padr\u00e3o do Angular, que \u00e9 a porta 4200. Portanto, para acessar a p\u00e1gina Web criada pela aplica\u00e7\u00e3o, acesse pelo navegador: http://localhost:4200 Ap\u00f3s execu\u00e7\u00e3o dos scripts o OWS Server estar\u00e1 executando na m\u00e1quina do usu\u00e1rio na porta 5000 e o RISCOSOCIOAMBIENTAL tamb\u00e9m na m\u00e1quina do usu\u00e1rio na porta 3000 .","title":"Cria\u00e7\u00e3o do Ambiente de Desenvolvimento"},{"location":"02-arq_geral/","text":"Arquitetura de software O Risco Socioambiental foi desenvolvido de acordo com os padr\u00f5es de interoperabilidade definidos pela Open Geospatial Consortium ( OGC ) e a arquitetura de webservices com o padr\u00e3o REST . Componentes de software A arquitetura de software desenvolvida para o Risco Socioambiental pode ser observada na Figura abaixo. Essencialmente, pode-se dividir o Risco Socioambiental em tr\u00eas partes: Client: respons\u00e1vel por apresentar toda a interface, constru\u00eddo em Angular 5 com apoio dos frameworks: WebMap: Mapa interativo constru\u00eddo com o Leaflet Componentes front-end : CSS Server: Disponibiliza os servi\u00e7os que comp\u00f5em a aplica\u00e7\u00e3o: Application Server: Disponibiliza o acesso aos dados do Data Source, an\u00e1lises e configura\u00e7\u00f5es. OWS Server : Disponibiliza o acesso ao MapServer , respons\u00e1vel pelo processamento dos dados geogr\u00e1ficos, apresenta\u00e7\u00e3o visual dos mesmos e gerenciamento de cache das imagens geradas. Data Source : Respons\u00e1vel por armazenar os dados vetoriais e matriciais. Resumidamente, todos os dados usados pelo Risco Socioambiental est\u00e3o organizados em um banco de dados SQLite e em sistemas de arquivos (Data Repository) . O SQLite \u00e9 armazenado tamb\u00e9m em arquivo e permite processar consultas espaciais via Structured Query Language (SQL). J\u00e1 os dados que n\u00e3o necessitam de cruzamentos espaciais s\u00e3o armazenados em arquivos nos formatos Shapefile e/ou GeoTIFF. Estes dados s\u00e3o acessados pelo Application Server e pelo OWS Server (ambos constru\u00eddos em NodeJS) e s\u00e3o disponibilizados atrav\u00e9s de URLs com requisi\u00e7\u00f5es por meio do protocolo HTTP . Todas as requisi\u00e7\u00f5es Web realizadas aos Servers s\u00e3o interceptadas pelo Apache Server e devidamente redirecionadas. Desta forma, o Client realiza todas as requisi\u00e7\u00f5es necess\u00e1rias para construir a visualiza\u00e7\u00e3o dos elementos da p\u00e1gina, tais como: mapa interativo, gr\u00e1ficos, campo de busca e etc. Por fim, destaca-se que todo o c\u00f3digo-fonte para o Risco Socioambiental e tamb\u00e9m para o OWS Server foi disponibilizado publicamente no Github do LAPIG/UFG .","title":"Vis\u00e3o geral"},{"location":"02-arq_geral/#arquitetura-de-software","text":"O Risco Socioambiental foi desenvolvido de acordo com os padr\u00f5es de interoperabilidade definidos pela Open Geospatial Consortium ( OGC ) e a arquitetura de webservices com o padr\u00e3o REST .","title":"Arquitetura de software"},{"location":"02-arq_geral/#componentes-de-software","text":"A arquitetura de software desenvolvida para o Risco Socioambiental pode ser observada na Figura abaixo. Essencialmente, pode-se dividir o Risco Socioambiental em tr\u00eas partes: Client: respons\u00e1vel por apresentar toda a interface, constru\u00eddo em Angular 5 com apoio dos frameworks: WebMap: Mapa interativo constru\u00eddo com o Leaflet Componentes front-end : CSS Server: Disponibiliza os servi\u00e7os que comp\u00f5em a aplica\u00e7\u00e3o: Application Server: Disponibiliza o acesso aos dados do Data Source, an\u00e1lises e configura\u00e7\u00f5es. OWS Server : Disponibiliza o acesso ao MapServer , respons\u00e1vel pelo processamento dos dados geogr\u00e1ficos, apresenta\u00e7\u00e3o visual dos mesmos e gerenciamento de cache das imagens geradas. Data Source : Respons\u00e1vel por armazenar os dados vetoriais e matriciais. Resumidamente, todos os dados usados pelo Risco Socioambiental est\u00e3o organizados em um banco de dados SQLite e em sistemas de arquivos (Data Repository) . O SQLite \u00e9 armazenado tamb\u00e9m em arquivo e permite processar consultas espaciais via Structured Query Language (SQL). J\u00e1 os dados que n\u00e3o necessitam de cruzamentos espaciais s\u00e3o armazenados em arquivos nos formatos Shapefile e/ou GeoTIFF. Estes dados s\u00e3o acessados pelo Application Server e pelo OWS Server (ambos constru\u00eddos em NodeJS) e s\u00e3o disponibilizados atrav\u00e9s de URLs com requisi\u00e7\u00f5es por meio do protocolo HTTP . Todas as requisi\u00e7\u00f5es Web realizadas aos Servers s\u00e3o interceptadas pelo Apache Server e devidamente redirecionadas. Desta forma, o Client realiza todas as requisi\u00e7\u00f5es necess\u00e1rias para construir a visualiza\u00e7\u00e3o dos elementos da p\u00e1gina, tais como: mapa interativo, gr\u00e1ficos, campo de busca e etc. Por fim, destaca-se que todo o c\u00f3digo-fonte para o Risco Socioambiental e tamb\u00e9m para o OWS Server foi disponibilizado publicamente no Github do LAPIG/UFG .","title":"Componentes de software"},{"location":"02-arq_servidor_de_aplicacao/","text":"Servidor de Aplica\u00e7\u00e3o Basicamente a plataforma de Risco Socioambiental \u00e9 dividida em duas partes: o WebMap Client e o Application Server , conforme descrito anteriormente. O c\u00f3digo-fonte para estas duas partes est\u00e1 hospedado no resposit\u00f3rio Github do projeto. Dentro do reposit\u00f3rio do projeto, o c\u00f3digo-fonte do Application Server est\u00e1 em src/server . Por ser constru\u00eddo em NodeJS, ao clonar o projeto o usu\u00e1rio dever\u00e1 navegar at\u00e9 a pasta server e instalar as depend\u00eancias gerenciadas pelo Node Package Manager (NPM) atrav\u00e9s do comando: npm install Em seguida, deve-se copiar o arquivo .env.exemple renomeando-o para .env: cp .env.exemple .env Em seguida, deve-se alterar o arquivo .env com as devidas configura\u00e7\u00f5es e par\u00e2metros referentes ao banco de dados, pastas para armazenamento dos arquivos de Upload e Download e endere\u00e7o de hospedagem do OWS Server. Por fim, a fim de facilitar a execu\u00e7\u00e3o do Application Server foi desenvolvido um script nomeado start.sh localizado na raiz da pasta src/server . Portanto, basta realizar a execu\u00e7\u00e3o deste arquivo para inicializar o Application Server . A fim de identificar modifica\u00e7\u00f5es em tempo real, o Application Server faz uso da biblioteca always , portanto talvez seja necess\u00e1rio a instala\u00e7\u00e3o da mesma atrav\u00e9s do comando. $ sudo npm install always -g Ap\u00f3s a instala\u00e7\u00e3o do always , pode-se inicializar o Application Server atrav\u00e9s do comando: $ ./src/server/start.sh Manipula\u00e7\u00e3o do banco de dados O caminho da pasta onde est\u00e1 localizado o banco de dados indicadores.sqlite deve ser informado corretamente no arquivo de configura\u00e7\u00e3o .env nas seguintes vari\u00e1veis: INDICADORES_DB para o banco de dados ambiente de desenvolvimento e INDICADORES_DB_PROD para o banco de dados do ambiente de produ\u00e7\u00e3o. Caso o caminho n\u00e3o esteja correto, a aplica\u00e7\u00e3o pode n\u00e3o funcionar corretamente. Como criar um novo servi\u00e7o - O Application Server possui duas pastas que armazenam os principais arquivos que permitem a disponibiliza\u00e7\u00e3o de um novo servi\u00e7o ao Risco Socioambiental: Controller: : Os arquivos nesta pasta s\u00e3o respons\u00e1veis por processar implementar a l\u00f3gica da tarefa passada pela requisi\u00e7\u00e3o HTTP. Routes : Os arquivos desta pasta s\u00e3o os respons\u00e1veis por criar as URLs de acesso (endpoint) a um servi\u00e7o, apontar qual o controlador dever\u00e1 processar a l\u00f3gica para a requisi\u00e7\u00e3o. Portanto, a seguir vamos mostrar um exemplo do servi\u00e7o real da plataforma, que tr\u00e1s a lista completa dos dados e seus indicadores. server/routes/indicadores.js module.exports = function (app) { var indicadores = app.controllers.indicadores; app.get('/service/indicadores/lista', indicadores.lista); } Ap\u00f3s a cria\u00e7\u00e3o do endpoint de acesso, basta criar o controlador indicadores.js para receber a requisi\u00e7\u00e3o, realizar a chamada ao m\u00e9todo para execu\u00e7\u00e3o da query , coletar o resultado e enviar como resposta da requisi\u00e7\u00e3o. server/controllers/indicadores.js module.exports = function (app) { const config = app.config; var Indicadores = {}; Consults.getIndicadoresDb = function(callback) { var indicadoresDb = new sqlite3.Database(config.indicadoresDb); indicadoresDb.spatialite(function() { callback(indicadoresDb); }); } Indicadores.lista = function(request, response, next) { var metadata = Indicadores['metadata']; var infoBbox = Indicadores.infoBbox; var bbox = \"[[-33.752414, -73.794489], [5.047586, -35.117489]]\"; var result = []; var aux; var regionType = request.param('regionType', ''); var region = request.param('region', ''); var filter = ''; infoBbox.forEach(function(info){ if(regionType != \"municipio\"){ if(region == info[0]){ bbox = \"[[\"+info[1]+\"], [\"+info[2]+\"]]\"; } } }); var interate = function(metadata, next){ var fieldResult = { \"id\": metadata.id, \"categ\": metadata.categ, \"nome\": metadata.nome, \"descricao\": metadata.descricao, \"unidade\": metadata.unidade, \"regiao\":metadata.regiao, \"area_ha\":metadata.area_ha, \"valor\": metadata.valor, \"ano\": metadata.ano, \"tipo\": metadata.tipo, \"bbox\": bbox }; if (regionType){ filter = Indicadores.getRegionFilter(regionType, region, metadata.DB.Columm); fieldResult['regiao'] = region; }else{ fieldResult['regiao'] = 'Brasil'; }; var sql = Indicadores.getQuerySql(metadata.DB.Columm, metadata.DB.Table, filter, metadata.DB.Group); var sql2 = 'SELECT sum(POL_HA) as AREA_REG FROM \"regions\" '+filter; Consults.getIndicadoresDb(function(indicadoresDb){ indicadoresDb.all(sql, function(err, rows){ if(regionType == 'municipio' && rows[0]) fieldResult['bbox'] = \"[[\"+rows[0].bboxleaflet+\"]]\"; metadata.DB.process(rows, fieldResult); indicadoresDb.all(sql2, function(err, rows){ fieldResult['area_ha'] = rows[0].AREA_REG; result.push(fieldResult) next(); }); }); }); } var finalize = function (){ result.sort(function(a,b) { if(a.id < b.id) return -1; if(a.id > b.id) return 1; return 0; }) request.finalizeResult = result next(); } async.each(metadata, interate, finalize); }; return Indicadores; } Por fim, este por se tratar de uma requisi\u00e7\u00e3o HTTP do tipo GET , a mesma poder\u00e1 ser acessada via navegador. Considerando que o server est\u00e1 executando em localhost:3000 e o usu\u00e1rio deseja obter a lista de dados e seus indicadores, a URL de acesso ficar\u00e1 da seguinte forma: http://localhost:3000/service/indicadores/lista A visualiza\u00e7\u00e3o do JSON resultado da requisi\u00e7\u00e3o acima pode ser observado no link . Al\u00e9m de requisitar pelo navegador, o servi\u00e7o tamb\u00e9m poder\u00e1 ser requisitado pelo WebMap Client a fim de disponibilizar este dado na plataforma Risco Socioambiental: client/src/assets/js/app/map.js var url = '/service/indicadores/lista' ajax( url, DATA, 'create_indicators_list', [] )","title":"Servidor de aplica\u00e7\u00e3o"},{"location":"02-arq_servidor_de_aplicacao/#servidor-de-aplicacao","text":"Basicamente a plataforma de Risco Socioambiental \u00e9 dividida em duas partes: o WebMap Client e o Application Server , conforme descrito anteriormente. O c\u00f3digo-fonte para estas duas partes est\u00e1 hospedado no resposit\u00f3rio Github do projeto. Dentro do reposit\u00f3rio do projeto, o c\u00f3digo-fonte do Application Server est\u00e1 em src/server . Por ser constru\u00eddo em NodeJS, ao clonar o projeto o usu\u00e1rio dever\u00e1 navegar at\u00e9 a pasta server e instalar as depend\u00eancias gerenciadas pelo Node Package Manager (NPM) atrav\u00e9s do comando: npm install Em seguida, deve-se copiar o arquivo .env.exemple renomeando-o para .env: cp .env.exemple .env Em seguida, deve-se alterar o arquivo .env com as devidas configura\u00e7\u00f5es e par\u00e2metros referentes ao banco de dados, pastas para armazenamento dos arquivos de Upload e Download e endere\u00e7o de hospedagem do OWS Server. Por fim, a fim de facilitar a execu\u00e7\u00e3o do Application Server foi desenvolvido um script nomeado start.sh localizado na raiz da pasta src/server . Portanto, basta realizar a execu\u00e7\u00e3o deste arquivo para inicializar o Application Server . A fim de identificar modifica\u00e7\u00f5es em tempo real, o Application Server faz uso da biblioteca always , portanto talvez seja necess\u00e1rio a instala\u00e7\u00e3o da mesma atrav\u00e9s do comando. $ sudo npm install always -g Ap\u00f3s a instala\u00e7\u00e3o do always , pode-se inicializar o Application Server atrav\u00e9s do comando: $ ./src/server/start.sh","title":"Servidor de Aplica\u00e7\u00e3o"},{"location":"02-arq_servidor_de_aplicacao/#manipulacao-do-banco-de-dados","text":"O caminho da pasta onde est\u00e1 localizado o banco de dados indicadores.sqlite deve ser informado corretamente no arquivo de configura\u00e7\u00e3o .env nas seguintes vari\u00e1veis: INDICADORES_DB para o banco de dados ambiente de desenvolvimento e INDICADORES_DB_PROD para o banco de dados do ambiente de produ\u00e7\u00e3o. Caso o caminho n\u00e3o esteja correto, a aplica\u00e7\u00e3o pode n\u00e3o funcionar corretamente.","title":"Manipula\u00e7\u00e3o do banco de dados"},{"location":"02-arq_servidor_de_aplicacao/#como-criar-um-novo-servico","text":"- O Application Server possui duas pastas que armazenam os principais arquivos que permitem a disponibiliza\u00e7\u00e3o de um novo servi\u00e7o ao Risco Socioambiental: Controller: : Os arquivos nesta pasta s\u00e3o respons\u00e1veis por processar implementar a l\u00f3gica da tarefa passada pela requisi\u00e7\u00e3o HTTP. Routes : Os arquivos desta pasta s\u00e3o os respons\u00e1veis por criar as URLs de acesso (endpoint) a um servi\u00e7o, apontar qual o controlador dever\u00e1 processar a l\u00f3gica para a requisi\u00e7\u00e3o. Portanto, a seguir vamos mostrar um exemplo do servi\u00e7o real da plataforma, que tr\u00e1s a lista completa dos dados e seus indicadores. server/routes/indicadores.js module.exports = function (app) { var indicadores = app.controllers.indicadores; app.get('/service/indicadores/lista', indicadores.lista); } Ap\u00f3s a cria\u00e7\u00e3o do endpoint de acesso, basta criar o controlador indicadores.js para receber a requisi\u00e7\u00e3o, realizar a chamada ao m\u00e9todo para execu\u00e7\u00e3o da query , coletar o resultado e enviar como resposta da requisi\u00e7\u00e3o. server/controllers/indicadores.js module.exports = function (app) { const config = app.config; var Indicadores = {}; Consults.getIndicadoresDb = function(callback) { var indicadoresDb = new sqlite3.Database(config.indicadoresDb); indicadoresDb.spatialite(function() { callback(indicadoresDb); }); } Indicadores.lista = function(request, response, next) { var metadata = Indicadores['metadata']; var infoBbox = Indicadores.infoBbox; var bbox = \"[[-33.752414, -73.794489], [5.047586, -35.117489]]\"; var result = []; var aux; var regionType = request.param('regionType', ''); var region = request.param('region', ''); var filter = ''; infoBbox.forEach(function(info){ if(regionType != \"municipio\"){ if(region == info[0]){ bbox = \"[[\"+info[1]+\"], [\"+info[2]+\"]]\"; } } }); var interate = function(metadata, next){ var fieldResult = { \"id\": metadata.id, \"categ\": metadata.categ, \"nome\": metadata.nome, \"descricao\": metadata.descricao, \"unidade\": metadata.unidade, \"regiao\":metadata.regiao, \"area_ha\":metadata.area_ha, \"valor\": metadata.valor, \"ano\": metadata.ano, \"tipo\": metadata.tipo, \"bbox\": bbox }; if (regionType){ filter = Indicadores.getRegionFilter(regionType, region, metadata.DB.Columm); fieldResult['regiao'] = region; }else{ fieldResult['regiao'] = 'Brasil'; }; var sql = Indicadores.getQuerySql(metadata.DB.Columm, metadata.DB.Table, filter, metadata.DB.Group); var sql2 = 'SELECT sum(POL_HA) as AREA_REG FROM \"regions\" '+filter; Consults.getIndicadoresDb(function(indicadoresDb){ indicadoresDb.all(sql, function(err, rows){ if(regionType == 'municipio' && rows[0]) fieldResult['bbox'] = \"[[\"+rows[0].bboxleaflet+\"]]\"; metadata.DB.process(rows, fieldResult); indicadoresDb.all(sql2, function(err, rows){ fieldResult['area_ha'] = rows[0].AREA_REG; result.push(fieldResult) next(); }); }); }); } var finalize = function (){ result.sort(function(a,b) { if(a.id < b.id) return -1; if(a.id > b.id) return 1; return 0; }) request.finalizeResult = result next(); } async.each(metadata, interate, finalize); }; return Indicadores; } Por fim, este por se tratar de uma requisi\u00e7\u00e3o HTTP do tipo GET , a mesma poder\u00e1 ser acessada via navegador. Considerando que o server est\u00e1 executando em localhost:3000 e o usu\u00e1rio deseja obter a lista de dados e seus indicadores, a URL de acesso ficar\u00e1 da seguinte forma: http://localhost:3000/service/indicadores/lista A visualiza\u00e7\u00e3o do JSON resultado da requisi\u00e7\u00e3o acima pode ser observado no link . Al\u00e9m de requisitar pelo navegador, o servi\u00e7o tamb\u00e9m poder\u00e1 ser requisitado pelo WebMap Client a fim de disponibilizar este dado na plataforma Risco Socioambiental: client/src/assets/js/app/map.js var url = '/service/indicadores/lista' ajax( url, DATA, 'create_indicators_list', [] )","title":"Como criar um novo servi\u00e7o"},{"location":"02-arq_servidor_de_mapas/","text":"Servidor de Mapas O OWS Server \u00e9 respons\u00e1vel por encaminhar as requisi\u00e7\u00f5es ao Mapserver a fim de gerar a visualiza\u00e7\u00e3o dos dados geogr\u00e1ficos e organizar para que as imagens geradas sejam armazenadas em cache para melhorar o desempenho em requisi\u00e7\u00f5es futuras. O c\u00f3digo-fonte para o OWS Server se encontra no reposit\u00f3rio Github do LAPIG/UFG. Devido a facilidade em lidar com a arquitetura de WebServices, o c\u00f3digo em NodeJS foi criado para tamb\u00e9m realizar o controle de cache das imagens processadas pelo Mapserver. Para tal, uma customiza\u00e7\u00e3o foi criada a fim de se associar uma chave ( cacheKey ) a cada imagem de cada camada configurada no Mapserver. Esta imagem \u00e9 armazenada em um sistema de arquivos (pasta) chamada OWS-Cache , de modo que, em futuras requisi\u00e7\u00f5es para uma determinada imagem, \u00e9 verificada se a imagem j\u00e1 existe na OWS-Cache ou n\u00e3o. Caso exista, a imagem \u00e9 retornada na requisi\u00e7\u00e3o, caso n\u00e3o exista, o c\u00f3digo NodeJS envia a requisi\u00e7\u00e3o para o Mapserver processar e ger\u00e1-la, armazenando-a no OWS-Cache . O m\u00e9todo que realiza esta verifica\u00e7\u00e3o \u00e9 o m\u00e9todo OgcServer.ows que faz parte do Controlador da aplica\u00e7\u00e3o em NodeJS. src/controllers/ogc-server.js OgcServer.ows = function(request, response) { var params = Internal.getParams(request); response.setHeader(\"Access-Control-Allow-Origin\", \"*\"); Internal.setHeaders(params, request, response); var cacheKey = Internal.getCacheKey(params); if(cacheKey && (config['cacheEnable'] || Internal.isWmsGetCap(params)) ) { Internal.doRequestWithCache(cacheKey, params, response); } else { Internal.doRequest(params, response); } } Esta customiza\u00e7\u00e3o pode ser encontrada no c\u00f3digo NodeJS no reposit\u00f3rio espec\u00edfico para o c\u00f3digo NodeJS no Github . A configura\u00e7\u00e3o da pasta onde ser\u00e3o gerados os caches \u00e9 feita no arquivo config.js na linha 41 atrav\u00e9s da vari\u00e1vel cacheDir . Servi\u00e7o de interoperabilidade A interoperabilidade \u00e9 uma tecnologia que possibilita o compartilhamento de dados entre sistemas, independente do local f\u00edsico de armazenamento e da tecnologia utilizada em cada servidor de dados. No Geoprocessamento, a interoperabilidade pode ser aplicada para promover o interc\u00e2mbio de dados geogr\u00e1ficos entre diferentes softwares de SIG. O OCG (Open Geospatial Consortium, Inc.) \u00e9 uma organiza\u00e7\u00e3o que tem como objetivo principal viabilizar o interc\u00e2mbio de dados geogr\u00e1ficos atrav\u00e9s da cria\u00e7\u00e3o de especifica\u00e7\u00f5es que simplificam a intera\u00e7\u00e3o entre diferentes fontes de dados. Desta forma, os principais servi\u00e7os especificados pela OGC s\u00e3o: Web Map Service - WMS : produz mapas din\u00e2micos partir de dados georreferenciados em um servidor remoto. Esses mapas s\u00e3o geralmente apresentados no formato de figura (PNG, JPEG ou GIF). Tamb\u00e9m \u00e9 poss\u00edvel consultar os atributos dos elementos que comp\u00f5em os mapas. Web Feature Service - WFS : define um servi\u00e7o para recupera\u00e7\u00e3o de objetos ( features ) espaciais. Diferentemente do WMS, o WFS devolve o dado e n\u00e3o uma \"figura\" do dado. Tile Map Service - TMS : define um servi\u00e7o que fornece imagens de dados geogr\u00e1ficos a partir de URLs para por\u00e7\u00f5es ( tiles ) definidas pelo conjunto de coordenadas {z} {x} {y} do dado georeferenciado. O TMS \u00e9 mais amplamente suportado pelos navegadores Web. UTFGrid : usam uma combina\u00e7\u00e3o de codifica\u00e7\u00e3o JSON e arquivos grid ASCII que est\u00e3o ao lado de cada bloco de imagem do mapa. Desta forma, uma tabela de pesquisa em JSON fornece o conjunto completo de atributos que viabiliza a devolu\u00e7\u00e3o de dados sobre aquele grid, permitindo interatividade com o mapas. Desta forma, uma representa\u00e7\u00e3o visual da interoperabilidade entre servi\u00e7os pode ser encontrada no link e apresentada abaixo. Por fim, a tabela abaixo apresenta os tipos de servi\u00e7os fornecidos pelo Risco Socioambiental bem como suas URLs de acesso, onde <ows_host> representa o dom\u00ednio onde o OWS Server est\u00e1 hospedado e <layername> representa a camada configurada no Mapfile: Tipo de Requisi\u00e7\u00e3o Fonte Descri\u00e7\u00e3o URL WMS OWS Server Retorna uma imagem com a legenda da camada ( <layername> ) especificada no mapfile .. https://<ows_host>/ows?TRANSPARENT=TRUE&VERSION=1.1.1&SERVICE=WMS&REQUEST=GetLegendGraphic&layer=<layername>&format=image/png WMS OWS Server Retorna uma imagem com a composi\u00e7\u00e3o de camadas identificadas pelas layers, com o foco no enquadramento para a geometria definida pela fun\u00e7\u00e3o ST_EXTENT do Postgis. Por fim, o par\u00e2metro <sql_applied_on_MSFILTER> especifica a query que dever\u00e1 ser aplicada para filtrar dados em todas as camadas que possuam MSFILTER em sua configura\u00e7\u00e3o no Mapserver. https://<ows_host>/ows?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&layers=<layername1>,<layername2>, ... &bbox=<bounding_box>&TRANSPARENT=TRUE&srs=EPSG:4674&width=768&height=768&format=image/png&styles=&ENHANCE=TRUE&MSFILTER=<sql_applied_on_MSFILTER> TMS OWS Server Retorna uma imagem com a composi\u00e7\u00e3o de camadas identificadas pelas layers, com o foco no enquadramento para a geometria definida pela fun\u00e7\u00e3o ST_EXTENT do Postgis. Por fim, o par\u00e2metro <sql_applied_on_MSFILTER> especifica a query que dever\u00e1 ser aplicada para filtrar dados em todas as camadas que possuam MSFILTER em sua configura\u00e7\u00e3o no Mapserver. https://<ows_host>/ows?layers=<layername>&MSFILTER=<sql_applied_on_MSFILTER>&mode=tile&tile=<{z}>+<{x}>+<{y}>&tilemode=gmap&map.imagetype=png TMS Mapbox Retorna a composi\u00e7\u00e3o do mapa Geopol\u00edtico fornecido pela Mapbox https://api.tiles.mapbox.com/v4/mapbox.light/<{z}>/<{x}>/<{y}>.png?access_token=<chave_de_acesso>. TMS Google Maps Retorna a composi\u00e7\u00e3o de imagens do mapa fornecido pela API do GoogleMaps. https://mt{0-3}.google.com/vt/lyrs=m&x=<{x}>&y=<{y}>&z=<{z}> TMS World Shaded Relief Retorna a composi\u00e7\u00e3o de mapas de Relevo fornecido pelo ArcGis. https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/<{z}>/<{y}>/<{x}> UTFGrid OWS Server Retorna os dados referentes aos atributos definidos na camada fornecida pelo OWS Server para o especificado na requisi\u00e7\u00e3o para o tile {z},{x},{y}. https://<ows_host>/ows?layers=<layername>&MSFILTER=<sql_applied_on_MSFILTER>&mode=tile&tile=<{z}>+<{x}>+<{y}>&tilemode=gmap&map.imagetype=utfgrid Processo de atualiza\u00e7\u00e3o Um dado geogr\u00e1fico \u00e9 disponbilizado pelo Mapserver como uma camada. Assim como abordado na se\u00e7\u00e3o de servi\u00e7os de interoperabilidade os dados devem estar armazenados em uma pasta de cat\u00e1logo dos dados (pasta catalog) configur\u00e1vel no arquivo config.js atrav\u00e9s da vari\u00e1vel cacheDir . O Mapserver utiliza um arquivo de configura\u00e7\u00e3o para renderiza\u00e7\u00e3o de dados geoespaciais chamado de Mapfile. O principal objetivo do Mapfile \u00e9 definir as camadas que podem ser \"desenhadas\" pelo Mapserver, como ler estes dados (uma vez que eles podem ser vetores ou matrizes) e como renderiz\u00e1-los, definindo cores, s\u00edmbolos, r\u00f3tulos, legendas e etc. Desta forma, o Mapfile inclui informa\u00e7\u00f5es sobre: Quais camadas devem ser renderizadas; Onde est\u00e1 o foco geogr\u00e1fico do mapa; Qual proje\u00e7\u00e3o est\u00e1 sendo usada; Qual o formato gr\u00e1fico de sa\u00edda; Configura\u00e7\u00e3o da legenda e a escala utilizada; As duas figuras abaixo apresentam exemplos do Mapfile da camada de \u00c1rea Plantada de Milho como exemplo de mapfile para dados vetoriais e matriciais respectivamente, ambos presentes na plataforma Risco Socioambiental. Portanto, segue a especifica\u00e7\u00e3o de cada item destacado na imagem: Apresenta o nome da camada (NAME), bem como a fonte de onde este dado ser\u00e1 carregado (CONNECTION). No exemplo este dado \u00e9 acessado pela comunica\u00e7\u00e3o com o SQLite. Al\u00e9m deste, temos tamb\u00e9m o par\u00e2metro EXTENT que ir\u00e1 informar a extens\u00e3o em que o dado se encontra, no exemplo abaixo foi definida a extens\u00e3o de todo o Brasil. Apresenta os metadados e a proje\u00e7\u00e3o utilizada na camada; Apresenta o par\u00e2metro FILTER (MSFILTER) que ir\u00e1 receber a filtragem aplicada ao dado por meio do runtime substitution ; Define uma classifica\u00e7\u00e3o para os dados a fim de customizar a colora\u00e7\u00e3o de acordo com um crit\u00e9rio. A classifica\u00e7\u00e3o estabelecida tamb\u00e9m ir\u00e1 compor a legenda. No exemplo, \u00e9 aplicada as cores cinza (preenchimento) e azul (bordas). Por fim, o Mapfile utilizado para disponibilizar todas as camadas presentes no Risco Socioambiental est\u00e1 na pasta compartilhada do projeto no link . Disponibiliza\u00e7\u00e3o da camada no Application Server Ap\u00f3s a cria\u00e7\u00e3o da camada no OWS Server, para que esta camada seja apresentada na interface Web do Risco Socioambiental \u00e9 necess\u00e1ria a sua inser\u00e7\u00e3o no Application Server . A fim de facilitar a disponibiliza\u00e7\u00e3o de diversas camadas, foi criada uma estrutura nomeada de metadata que descreve as principais configura\u00e7\u00f5es de uma camada a ser apresentada no Risco Socioambiental, tais como: filtros de dados, tipos diferentes de camadas e outros. A estrutura completa do descriptor encontra-se no reposit\u00f3rio do projeto no Github, especificamente no arquivo indicadores.js . Segue abaixo as configura\u00e7\u00f5es das camadas apresentadas acima dentro da estrutura do descriptor, um exemplo da camada de Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral . server/controllers/indicadores.js module.exports = function(app) { var Indicadores = {}; Indicadores.metadata = [ { \"id\": \"unidades_conservacao_integral\", \"categ\": [\"Ambiental\"], \"nome\": \"Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral\", \"descricao\": \"Localiza\u00e7\u00e3o das unidades de conserva\u00e7\u00e3o de prote\u00e7\u00e3o integral brasileiras, incluindo a Base ao Milion\u00e9simo do IBGE de 2014.\", \"unidade\": \"ha\", \"regiao\": \"Brasil\", \"area_ha\": '', \"valor\": [], \"ano\": [], \"tipo\": \"espacial\", \"bbox\": \"-73.9904499673534,-33.7515830040535,-28.835907629926,5.27184107509129\", \"DB\":{ \"Columm\": \"AREA_HA\", \"Table\": \"unidades_conservacao_integral_regions_view\", \"Group\": \"\", \"process\": function(rows,metadata) { metadata['valor'] = [rows[0].AREA_HA]; metadata['ano'] = [rows[0].ANO]; } } }, ] } Os diversos par\u00e2metros setados s\u00e3o interpretados pela aplica\u00e7\u00e3o Front-end em Angular, de modo a criar a interface apresentada na imagem abaixo. Aqui \u00e9 onde configuramos Nome, Descri\u00e7\u00e3o, Categoria, dentre outras informa\u00e7\u00f5es que ser\u00e3o populadas por meio da tabela do banco de dados que tamb\u00e9m \u00e9 informada acima.","title":"Servidor de mapas"},{"location":"02-arq_servidor_de_mapas/#servidor-de-mapas","text":"O OWS Server \u00e9 respons\u00e1vel por encaminhar as requisi\u00e7\u00f5es ao Mapserver a fim de gerar a visualiza\u00e7\u00e3o dos dados geogr\u00e1ficos e organizar para que as imagens geradas sejam armazenadas em cache para melhorar o desempenho em requisi\u00e7\u00f5es futuras. O c\u00f3digo-fonte para o OWS Server se encontra no reposit\u00f3rio Github do LAPIG/UFG. Devido a facilidade em lidar com a arquitetura de WebServices, o c\u00f3digo em NodeJS foi criado para tamb\u00e9m realizar o controle de cache das imagens processadas pelo Mapserver. Para tal, uma customiza\u00e7\u00e3o foi criada a fim de se associar uma chave ( cacheKey ) a cada imagem de cada camada configurada no Mapserver. Esta imagem \u00e9 armazenada em um sistema de arquivos (pasta) chamada OWS-Cache , de modo que, em futuras requisi\u00e7\u00f5es para uma determinada imagem, \u00e9 verificada se a imagem j\u00e1 existe na OWS-Cache ou n\u00e3o. Caso exista, a imagem \u00e9 retornada na requisi\u00e7\u00e3o, caso n\u00e3o exista, o c\u00f3digo NodeJS envia a requisi\u00e7\u00e3o para o Mapserver processar e ger\u00e1-la, armazenando-a no OWS-Cache . O m\u00e9todo que realiza esta verifica\u00e7\u00e3o \u00e9 o m\u00e9todo OgcServer.ows que faz parte do Controlador da aplica\u00e7\u00e3o em NodeJS. src/controllers/ogc-server.js OgcServer.ows = function(request, response) { var params = Internal.getParams(request); response.setHeader(\"Access-Control-Allow-Origin\", \"*\"); Internal.setHeaders(params, request, response); var cacheKey = Internal.getCacheKey(params); if(cacheKey && (config['cacheEnable'] || Internal.isWmsGetCap(params)) ) { Internal.doRequestWithCache(cacheKey, params, response); } else { Internal.doRequest(params, response); } } Esta customiza\u00e7\u00e3o pode ser encontrada no c\u00f3digo NodeJS no reposit\u00f3rio espec\u00edfico para o c\u00f3digo NodeJS no Github . A configura\u00e7\u00e3o da pasta onde ser\u00e3o gerados os caches \u00e9 feita no arquivo config.js na linha 41 atrav\u00e9s da vari\u00e1vel cacheDir .","title":"Servidor de Mapas"},{"location":"02-arq_servidor_de_mapas/#servico-de-interoperabilidade","text":"A interoperabilidade \u00e9 uma tecnologia que possibilita o compartilhamento de dados entre sistemas, independente do local f\u00edsico de armazenamento e da tecnologia utilizada em cada servidor de dados. No Geoprocessamento, a interoperabilidade pode ser aplicada para promover o interc\u00e2mbio de dados geogr\u00e1ficos entre diferentes softwares de SIG. O OCG (Open Geospatial Consortium, Inc.) \u00e9 uma organiza\u00e7\u00e3o que tem como objetivo principal viabilizar o interc\u00e2mbio de dados geogr\u00e1ficos atrav\u00e9s da cria\u00e7\u00e3o de especifica\u00e7\u00f5es que simplificam a intera\u00e7\u00e3o entre diferentes fontes de dados. Desta forma, os principais servi\u00e7os especificados pela OGC s\u00e3o: Web Map Service - WMS : produz mapas din\u00e2micos partir de dados georreferenciados em um servidor remoto. Esses mapas s\u00e3o geralmente apresentados no formato de figura (PNG, JPEG ou GIF). Tamb\u00e9m \u00e9 poss\u00edvel consultar os atributos dos elementos que comp\u00f5em os mapas. Web Feature Service - WFS : define um servi\u00e7o para recupera\u00e7\u00e3o de objetos ( features ) espaciais. Diferentemente do WMS, o WFS devolve o dado e n\u00e3o uma \"figura\" do dado. Tile Map Service - TMS : define um servi\u00e7o que fornece imagens de dados geogr\u00e1ficos a partir de URLs para por\u00e7\u00f5es ( tiles ) definidas pelo conjunto de coordenadas {z} {x} {y} do dado georeferenciado. O TMS \u00e9 mais amplamente suportado pelos navegadores Web. UTFGrid : usam uma combina\u00e7\u00e3o de codifica\u00e7\u00e3o JSON e arquivos grid ASCII que est\u00e3o ao lado de cada bloco de imagem do mapa. Desta forma, uma tabela de pesquisa em JSON fornece o conjunto completo de atributos que viabiliza a devolu\u00e7\u00e3o de dados sobre aquele grid, permitindo interatividade com o mapas. Desta forma, uma representa\u00e7\u00e3o visual da interoperabilidade entre servi\u00e7os pode ser encontrada no link e apresentada abaixo. Por fim, a tabela abaixo apresenta os tipos de servi\u00e7os fornecidos pelo Risco Socioambiental bem como suas URLs de acesso, onde <ows_host> representa o dom\u00ednio onde o OWS Server est\u00e1 hospedado e <layername> representa a camada configurada no Mapfile: Tipo de Requisi\u00e7\u00e3o Fonte Descri\u00e7\u00e3o URL WMS OWS Server Retorna uma imagem com a legenda da camada ( <layername> ) especificada no mapfile .. https://<ows_host>/ows?TRANSPARENT=TRUE&VERSION=1.1.1&SERVICE=WMS&REQUEST=GetLegendGraphic&layer=<layername>&format=image/png WMS OWS Server Retorna uma imagem com a composi\u00e7\u00e3o de camadas identificadas pelas layers, com o foco no enquadramento para a geometria definida pela fun\u00e7\u00e3o ST_EXTENT do Postgis. Por fim, o par\u00e2metro <sql_applied_on_MSFILTER> especifica a query que dever\u00e1 ser aplicada para filtrar dados em todas as camadas que possuam MSFILTER em sua configura\u00e7\u00e3o no Mapserver. https://<ows_host>/ows?SERVICE=WMS&REQUEST=GetMap&VERSION=1.1.1&layers=<layername1>,<layername2>, ... &bbox=<bounding_box>&TRANSPARENT=TRUE&srs=EPSG:4674&width=768&height=768&format=image/png&styles=&ENHANCE=TRUE&MSFILTER=<sql_applied_on_MSFILTER> TMS OWS Server Retorna uma imagem com a composi\u00e7\u00e3o de camadas identificadas pelas layers, com o foco no enquadramento para a geometria definida pela fun\u00e7\u00e3o ST_EXTENT do Postgis. Por fim, o par\u00e2metro <sql_applied_on_MSFILTER> especifica a query que dever\u00e1 ser aplicada para filtrar dados em todas as camadas que possuam MSFILTER em sua configura\u00e7\u00e3o no Mapserver. https://<ows_host>/ows?layers=<layername>&MSFILTER=<sql_applied_on_MSFILTER>&mode=tile&tile=<{z}>+<{x}>+<{y}>&tilemode=gmap&map.imagetype=png TMS Mapbox Retorna a composi\u00e7\u00e3o do mapa Geopol\u00edtico fornecido pela Mapbox https://api.tiles.mapbox.com/v4/mapbox.light/<{z}>/<{x}>/<{y}>.png?access_token=<chave_de_acesso>. TMS Google Maps Retorna a composi\u00e7\u00e3o de imagens do mapa fornecido pela API do GoogleMaps. https://mt{0-3}.google.com/vt/lyrs=m&x=<{x}>&y=<{y}>&z=<{z}> TMS World Shaded Relief Retorna a composi\u00e7\u00e3o de mapas de Relevo fornecido pelo ArcGis. https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/<{z}>/<{y}>/<{x}> UTFGrid OWS Server Retorna os dados referentes aos atributos definidos na camada fornecida pelo OWS Server para o especificado na requisi\u00e7\u00e3o para o tile {z},{x},{y}. https://<ows_host>/ows?layers=<layername>&MSFILTER=<sql_applied_on_MSFILTER>&mode=tile&tile=<{z}>+<{x}>+<{y}>&tilemode=gmap&map.imagetype=utfgrid","title":"Servi\u00e7o de interoperabilidade"},{"location":"02-arq_servidor_de_mapas/#processo-de-atualizacao","text":"Um dado geogr\u00e1fico \u00e9 disponbilizado pelo Mapserver como uma camada. Assim como abordado na se\u00e7\u00e3o de servi\u00e7os de interoperabilidade os dados devem estar armazenados em uma pasta de cat\u00e1logo dos dados (pasta catalog) configur\u00e1vel no arquivo config.js atrav\u00e9s da vari\u00e1vel cacheDir . O Mapserver utiliza um arquivo de configura\u00e7\u00e3o para renderiza\u00e7\u00e3o de dados geoespaciais chamado de Mapfile. O principal objetivo do Mapfile \u00e9 definir as camadas que podem ser \"desenhadas\" pelo Mapserver, como ler estes dados (uma vez que eles podem ser vetores ou matrizes) e como renderiz\u00e1-los, definindo cores, s\u00edmbolos, r\u00f3tulos, legendas e etc. Desta forma, o Mapfile inclui informa\u00e7\u00f5es sobre: Quais camadas devem ser renderizadas; Onde est\u00e1 o foco geogr\u00e1fico do mapa; Qual proje\u00e7\u00e3o est\u00e1 sendo usada; Qual o formato gr\u00e1fico de sa\u00edda; Configura\u00e7\u00e3o da legenda e a escala utilizada; As duas figuras abaixo apresentam exemplos do Mapfile da camada de \u00c1rea Plantada de Milho como exemplo de mapfile para dados vetoriais e matriciais respectivamente, ambos presentes na plataforma Risco Socioambiental. Portanto, segue a especifica\u00e7\u00e3o de cada item destacado na imagem: Apresenta o nome da camada (NAME), bem como a fonte de onde este dado ser\u00e1 carregado (CONNECTION). No exemplo este dado \u00e9 acessado pela comunica\u00e7\u00e3o com o SQLite. Al\u00e9m deste, temos tamb\u00e9m o par\u00e2metro EXTENT que ir\u00e1 informar a extens\u00e3o em que o dado se encontra, no exemplo abaixo foi definida a extens\u00e3o de todo o Brasil. Apresenta os metadados e a proje\u00e7\u00e3o utilizada na camada; Apresenta o par\u00e2metro FILTER (MSFILTER) que ir\u00e1 receber a filtragem aplicada ao dado por meio do runtime substitution ; Define uma classifica\u00e7\u00e3o para os dados a fim de customizar a colora\u00e7\u00e3o de acordo com um crit\u00e9rio. A classifica\u00e7\u00e3o estabelecida tamb\u00e9m ir\u00e1 compor a legenda. No exemplo, \u00e9 aplicada as cores cinza (preenchimento) e azul (bordas). Por fim, o Mapfile utilizado para disponibilizar todas as camadas presentes no Risco Socioambiental est\u00e1 na pasta compartilhada do projeto no link .","title":"Processo de atualiza\u00e7\u00e3o"},{"location":"02-arq_servidor_de_mapas/#disponibilizacao-da-camada-no-application-server","text":"Ap\u00f3s a cria\u00e7\u00e3o da camada no OWS Server, para que esta camada seja apresentada na interface Web do Risco Socioambiental \u00e9 necess\u00e1ria a sua inser\u00e7\u00e3o no Application Server . A fim de facilitar a disponibiliza\u00e7\u00e3o de diversas camadas, foi criada uma estrutura nomeada de metadata que descreve as principais configura\u00e7\u00f5es de uma camada a ser apresentada no Risco Socioambiental, tais como: filtros de dados, tipos diferentes de camadas e outros. A estrutura completa do descriptor encontra-se no reposit\u00f3rio do projeto no Github, especificamente no arquivo indicadores.js . Segue abaixo as configura\u00e7\u00f5es das camadas apresentadas acima dentro da estrutura do descriptor, um exemplo da camada de Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral . server/controllers/indicadores.js module.exports = function(app) { var Indicadores = {}; Indicadores.metadata = [ { \"id\": \"unidades_conservacao_integral\", \"categ\": [\"Ambiental\"], \"nome\": \"Unidades de Conserva\u00e7\u00e3o de Prote\u00e7\u00e3o Integral\", \"descricao\": \"Localiza\u00e7\u00e3o das unidades de conserva\u00e7\u00e3o de prote\u00e7\u00e3o integral brasileiras, incluindo a Base ao Milion\u00e9simo do IBGE de 2014.\", \"unidade\": \"ha\", \"regiao\": \"Brasil\", \"area_ha\": '', \"valor\": [], \"ano\": [], \"tipo\": \"espacial\", \"bbox\": \"-73.9904499673534,-33.7515830040535,-28.835907629926,5.27184107509129\", \"DB\":{ \"Columm\": \"AREA_HA\", \"Table\": \"unidades_conservacao_integral_regions_view\", \"Group\": \"\", \"process\": function(rows,metadata) { metadata['valor'] = [rows[0].AREA_HA]; metadata['ano'] = [rows[0].ANO]; } } }, ] } Os diversos par\u00e2metros setados s\u00e3o interpretados pela aplica\u00e7\u00e3o Front-end em Angular, de modo a criar a interface apresentada na imagem abaixo. Aqui \u00e9 onde configuramos Nome, Descri\u00e7\u00e3o, Categoria, dentre outras informa\u00e7\u00f5es que ser\u00e3o populadas por meio da tabela do banco de dados que tamb\u00e9m \u00e9 informada acima.","title":"Disponibiliza\u00e7\u00e3o da camada no Application Server"},{"location":"03-banco_de_dados/","text":"Banco de dados Na plataforma de Risco Socioambiental o banco de dados utilizado foi o SQLite que usa a biblioteca SpatiaLite para fornecer um SGBD (Sistema gerenciador de banco de dados) espacial completo e poderoso. O \u00faltimo backup deste banco pode ser encontrado no link no arquivo indicadores.sqlite . Gerenciador do banco de dados O spatialite_gui \u00e9 uma ferramenta de interface gr\u00e1fica de usu\u00e1rio (GUI) de c\u00f3digo aberto que oferece suporte SpatiaLite, simples de utilizar, caso tenha d\u00favidas acesse a documenta\u00e7\u00e3o e tutoriais . Basicamente para gerenciar o banco de dados voc\u00ea precisar\u00e1 instalar o spatialite_gui em seu computador, ap\u00f3s isso abra a ferramenta e clique no \u00edcone para conectar a um banco de dados, conforme na imagem a seguir: Escolha o arquivo indicadores.sqlite que baixou agora a pouco por meio do link , assim o banco ser\u00e1 carregado na ferramenta veja: Agora voc\u00ea j\u00e1 pode come\u00e7ar as atualiza\u00e7\u00f5es! Processo de atualiza\u00e7\u00e3o Diversos dados presentes na plataforma de Risco Socioambiental s\u00e3o periodicamente atualizados pelas institui\u00e7\u00f5es competentes. Desta forma, a medida que os mesmos s\u00e3o atualizados e disponibilizados pelas institui\u00e7\u00f5es tamb\u00e9m \u00e9 necess\u00e1rio realizar a atualiza\u00e7\u00e3o no banco de dados de indicadores da plataforma. Para facilitar a inser\u00e7\u00e3o/atualiza\u00e7\u00f5es de dados n\u00f3s criamos alguns scripts que ser\u00e3o apresentados ao longo desde documento. Tabela base A tabela regions \u00e9 a base para todas as outras tabelas que s\u00e3o inseridas na plataforma, ela \u00e9 respons\u00e1vel por armazenar todas as poss\u00edveis regi\u00f5es de filtragem (biomas, estados, munic\u00edpios, Matopiba e Arco do Desmatamento) de acordo com o interesse do usu\u00e1rio, assim quando executamos o script de inser\u00e7\u00e3o de algum dado, ele usar\u00e1 a tabela regions para contruir toda a estrutura e acrescentar apenas o determinado indicador. Script de importa\u00e7\u00e3o Este script realiza a inser\u00e7\u00e3o de um dado do tipo ShapeFile no banco de dados, l\u00e1 ele ser\u00e1 apresentado como tabela e conter\u00e1 suas geometrias. Voc\u00ea poder\u00e1 baixar o script por meio do link , em todo caso este \u00e9 o conte\u00fado: SHP_PATH=$(echo \"$1\" | cut -d. -f1) SHP_PROJ=4674 SHP_ENCODING='ISO-8859-1' DB_PATH=\"/home/fernanda/Documentos/Projeto/Dados_local/Ocultos/indicadores.sqlite\" LAYERNAME=$(basename \"$SHP_PATH\" .shp) TABLE_NAME=$LAYERNAME GEOMETRY_TYPE=$(ogrinfo -ro -so $SHP_PATH $LAYERNAME | grep 'Geometry' | cut -d':' -f2) spatialite_tool -i -shp $SHP_PATH -2 -k -d $DB_PATH -t $TABLE_NAME -g Geometry -s $SHP_PROJ -c $SHP_ENCODING --type $GEOMETRY_TYPE O script acima l\u00ea o caminho da pasta do shapefile ( SHP_PATH ), a proje\u00e7\u00e3o ( SHP_PROJ ), o encoding ( SHP_ENCODING ), o banco de dados .sqlite ( DB_PATH ), nome da tabela que ser\u00e1 criada no banco de dados ( TABLE_NAME ) e geometria ( GEOMETRY_TYPE ) tudo isso \u00e9 feito dentro do script e pode ser alterado conforme necessidade. Ao executar o script import_indicadores.sh voc\u00ea dever\u00e1 apenas informar o caminho da pasta do shapefile ( SHP_PATH ) veja um exemplo de execu\u00e7\u00e3o: ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2000.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2002.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2008.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2009.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2010.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2011.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2012.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2013.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2014.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2015.shp Pronto! Os dados de Trabalho Escravo para os anos de 2000 \u00e1 2015 foram inserido com sucesso no banco de dados. Script de atualiza\u00e7\u00e3o dentro do banco de dados O Pr\u00f3ximo passo \u00e9 cruzar este dado com a tabela base regions , para que este dado possa ser filtrado na plataforma por regi\u00f5es de interesse e tamb\u00e9m unificar todos os os anos em apenas uma tabela. Este processo tamb\u00e9m \u00e9 simples e temos v\u00e1rios scripts prontos em sql , para baixar acesse o link . Veja um exemplo de script para atualizar a tabela geral ( trabalho_escravo ) de todos os anos de Trabalho Escravo: PRAGMA journal_mode = off; PRAGMA cache_size = -1024000; SELECT DisableSpatialIndex('trabalho_escravo', 'Geometry'); SELECT DiscardGeometryColumn('trabalho_escravo', 'Geometry'); DROP TABLE \"trabalho_escravo\"; CREATE TABLE \"trabalho_escravo\" ( \"PK_UID\" INTEGER PRIMARY KEY AUTOINCREMENT, \"COD_UF\" INTEGER, \"COD_MUNICI\" TEXT, \"REGIAO\" TEXT, \"ESTADO\" TEXT, \"UF\" TEXT, \"MUNICIPIO\" TEXT, \"BIOMA\" TEXT, \"ARCODESMAT\" INTEGER, \"MATOPIBA\" INTEGER, \"QTD_PESSOAS\" REAL, \"REGION_FK\" INTEGER, \"ANO\" INTEGER ); SELECT AddGeometryColumn('trabalho_escravo', 'Geometry', 4674, 'MULTIPOLYGON', 2); INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2000', s.Geometry FROM \"trabalho_escravo_cpt_2000\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2002', s.Geometry FROM \"trabalho_escravo_cpt_2002\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2008', s.Geometry FROM \"trabalho_escravo_cpt_2008\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2009', s.Geometry FROM \"trabalho_escravo_cpt_2009\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2010', s.Geometry FROM \"trabalho_escravo_cpt_2010\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2011', s.Geometry FROM \"trabalho_escravo_cpt_2011\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2012', s.Geometry FROM \"trabalho_escravo_cpt_2012\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2013', s.Geometry FROM \"trabalho_escravo_cpt_2013\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2014', s.Geometry FROM \"trabalho_escravo_cpt_2014\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2015', s.Geometry FROM \"trabalho_escravo_cpt_2015\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2016', s.Geometry FROM \"trabalho_escravo_cpt_2016\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; Este \u00e9 um exemplo de dado temporal, vamos conferir um dado diferente! Exemplo de inser\u00e7\u00e3o de dado n\u00e3o temporal Execute o script de importa\u00e7\u00e3o de dados: ./import_spatial_inteligence.sh Dados/SPATIAL/unidades_conservacao_integral/unidades_conservacao_integral_todos.shp Agora dentro do banco de dados, o Pr\u00f3ximo passo \u00e9 cruzar este dado com a tabela base regions , para que este dado possa ser filtrado na plataforma por regi\u00f5es de interesse: PRAGMA journal_mode = off; PRAGMA cache_size = -1024000; SELECT DisableSpatialIndex('unidades_conservacao_integral', 'Geometry'); SELECT DiscardGeometryColumn('unidades_conservacao_integral', 'Geometry'); DROP TABLE \"unidades_conservacao_integral\"; CREATE TABLE \"unidades_conservacao_integral\" ( \"PK_UID\" INTEGER PRIMARY KEY AUTOINCREMENT, \"COD_UF\" INTEGER, \"COD_MUNICI\" TEXT, \"REGIAO\" TEXT, \"ESTADO\" TEXT, \"UF\" TEXT, \"MUNICIPIO\" TEXT, \"BIOMA\" TEXT, \"ARCODESMAT\" INTEGER, \"MATOPIBA\" INTEGER, \"AREA_HA\" REAL, \"REGION_FK\" INTEGER, \"ANO\" INTEGER ); SELECT AddGeometryColumn('unidades_conservacao_integral', 'Geometry', 4674, 'MULTIPOLYGON', 2); INSERT INTO \"unidades_conservacao_integral\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, AREA_HA, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.AREA_HA, r.PK_UID, '2014', s.Geometry FROM \"unidades_conservacao_integral_todos\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; Pronto, agora voc\u00ea j\u00e1 sabe como atualizar os dados do banco de dados de indicadores da plataforma de Risco Socioambiental.","title":"Banco de Dados"},{"location":"03-banco_de_dados/#banco-de-dados","text":"Na plataforma de Risco Socioambiental o banco de dados utilizado foi o SQLite que usa a biblioteca SpatiaLite para fornecer um SGBD (Sistema gerenciador de banco de dados) espacial completo e poderoso. O \u00faltimo backup deste banco pode ser encontrado no link no arquivo indicadores.sqlite .","title":"Banco de dados"},{"location":"03-banco_de_dados/#gerenciador-do-banco-de-dados","text":"O spatialite_gui \u00e9 uma ferramenta de interface gr\u00e1fica de usu\u00e1rio (GUI) de c\u00f3digo aberto que oferece suporte SpatiaLite, simples de utilizar, caso tenha d\u00favidas acesse a documenta\u00e7\u00e3o e tutoriais . Basicamente para gerenciar o banco de dados voc\u00ea precisar\u00e1 instalar o spatialite_gui em seu computador, ap\u00f3s isso abra a ferramenta e clique no \u00edcone para conectar a um banco de dados, conforme na imagem a seguir: Escolha o arquivo indicadores.sqlite que baixou agora a pouco por meio do link , assim o banco ser\u00e1 carregado na ferramenta veja: Agora voc\u00ea j\u00e1 pode come\u00e7ar as atualiza\u00e7\u00f5es!","title":"Gerenciador do banco de dados"},{"location":"03-banco_de_dados/#processo-de-atualizacao","text":"Diversos dados presentes na plataforma de Risco Socioambiental s\u00e3o periodicamente atualizados pelas institui\u00e7\u00f5es competentes. Desta forma, a medida que os mesmos s\u00e3o atualizados e disponibilizados pelas institui\u00e7\u00f5es tamb\u00e9m \u00e9 necess\u00e1rio realizar a atualiza\u00e7\u00e3o no banco de dados de indicadores da plataforma. Para facilitar a inser\u00e7\u00e3o/atualiza\u00e7\u00f5es de dados n\u00f3s criamos alguns scripts que ser\u00e3o apresentados ao longo desde documento.","title":"Processo de atualiza\u00e7\u00e3o"},{"location":"03-banco_de_dados/#tabela-base","text":"A tabela regions \u00e9 a base para todas as outras tabelas que s\u00e3o inseridas na plataforma, ela \u00e9 respons\u00e1vel por armazenar todas as poss\u00edveis regi\u00f5es de filtragem (biomas, estados, munic\u00edpios, Matopiba e Arco do Desmatamento) de acordo com o interesse do usu\u00e1rio, assim quando executamos o script de inser\u00e7\u00e3o de algum dado, ele usar\u00e1 a tabela regions para contruir toda a estrutura e acrescentar apenas o determinado indicador.","title":"Tabela base"},{"location":"03-banco_de_dados/#script-de-importacao","text":"Este script realiza a inser\u00e7\u00e3o de um dado do tipo ShapeFile no banco de dados, l\u00e1 ele ser\u00e1 apresentado como tabela e conter\u00e1 suas geometrias. Voc\u00ea poder\u00e1 baixar o script por meio do link , em todo caso este \u00e9 o conte\u00fado: SHP_PATH=$(echo \"$1\" | cut -d. -f1) SHP_PROJ=4674 SHP_ENCODING='ISO-8859-1' DB_PATH=\"/home/fernanda/Documentos/Projeto/Dados_local/Ocultos/indicadores.sqlite\" LAYERNAME=$(basename \"$SHP_PATH\" .shp) TABLE_NAME=$LAYERNAME GEOMETRY_TYPE=$(ogrinfo -ro -so $SHP_PATH $LAYERNAME | grep 'Geometry' | cut -d':' -f2) spatialite_tool -i -shp $SHP_PATH -2 -k -d $DB_PATH -t $TABLE_NAME -g Geometry -s $SHP_PROJ -c $SHP_ENCODING --type $GEOMETRY_TYPE O script acima l\u00ea o caminho da pasta do shapefile ( SHP_PATH ), a proje\u00e7\u00e3o ( SHP_PROJ ), o encoding ( SHP_ENCODING ), o banco de dados .sqlite ( DB_PATH ), nome da tabela que ser\u00e1 criada no banco de dados ( TABLE_NAME ) e geometria ( GEOMETRY_TYPE ) tudo isso \u00e9 feito dentro do script e pode ser alterado conforme necessidade. Ao executar o script import_indicadores.sh voc\u00ea dever\u00e1 apenas informar o caminho da pasta do shapefile ( SHP_PATH ) veja um exemplo de execu\u00e7\u00e3o: ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2000.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2002.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2008.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2009.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2010.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2011.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2012.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2013.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2014.shp ./import_spatial_inteligence.sh Dados/SPATIAL/Trabalho_Escravo/trabalho_escravo_cpt_2015.shp Pronto! Os dados de Trabalho Escravo para os anos de 2000 \u00e1 2015 foram inserido com sucesso no banco de dados.","title":"Script de importa\u00e7\u00e3o"},{"location":"03-banco_de_dados/#script-de-atualizacao-dentro-do-banco-de-dados","text":"O Pr\u00f3ximo passo \u00e9 cruzar este dado com a tabela base regions , para que este dado possa ser filtrado na plataforma por regi\u00f5es de interesse e tamb\u00e9m unificar todos os os anos em apenas uma tabela. Este processo tamb\u00e9m \u00e9 simples e temos v\u00e1rios scripts prontos em sql , para baixar acesse o link . Veja um exemplo de script para atualizar a tabela geral ( trabalho_escravo ) de todos os anos de Trabalho Escravo: PRAGMA journal_mode = off; PRAGMA cache_size = -1024000; SELECT DisableSpatialIndex('trabalho_escravo', 'Geometry'); SELECT DiscardGeometryColumn('trabalho_escravo', 'Geometry'); DROP TABLE \"trabalho_escravo\"; CREATE TABLE \"trabalho_escravo\" ( \"PK_UID\" INTEGER PRIMARY KEY AUTOINCREMENT, \"COD_UF\" INTEGER, \"COD_MUNICI\" TEXT, \"REGIAO\" TEXT, \"ESTADO\" TEXT, \"UF\" TEXT, \"MUNICIPIO\" TEXT, \"BIOMA\" TEXT, \"ARCODESMAT\" INTEGER, \"MATOPIBA\" INTEGER, \"QTD_PESSOAS\" REAL, \"REGION_FK\" INTEGER, \"ANO\" INTEGER ); SELECT AddGeometryColumn('trabalho_escravo', 'Geometry', 4674, 'MULTIPOLYGON', 2); INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2000', s.Geometry FROM \"trabalho_escravo_cpt_2000\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2002', s.Geometry FROM \"trabalho_escravo_cpt_2002\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2008', s.Geometry FROM \"trabalho_escravo_cpt_2008\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2009', s.Geometry FROM \"trabalho_escravo_cpt_2009\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2010', s.Geometry FROM \"trabalho_escravo_cpt_2010\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2011', s.Geometry FROM \"trabalho_escravo_cpt_2011\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2012', s.Geometry FROM \"trabalho_escravo_cpt_2012\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2013', s.Geometry FROM \"trabalho_escravo_cpt_2013\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2014', s.Geometry FROM \"trabalho_escravo_cpt_2014\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2015', s.Geometry FROM \"trabalho_escravo_cpt_2015\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; INSERT INTO \"trabalho_escravo\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, QTD_PESSOAS, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.TRAB_PROPO, r.PK_UID, '2016', s.Geometry FROM \"trabalho_escravo_cpt_2016\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; Este \u00e9 um exemplo de dado temporal, vamos conferir um dado diferente!","title":"Script de atualiza\u00e7\u00e3o dentro do banco de dados"},{"location":"03-banco_de_dados/#exemplo-de-insercao-de-dado-nao-temporal","text":"Execute o script de importa\u00e7\u00e3o de dados: ./import_spatial_inteligence.sh Dados/SPATIAL/unidades_conservacao_integral/unidades_conservacao_integral_todos.shp Agora dentro do banco de dados, o Pr\u00f3ximo passo \u00e9 cruzar este dado com a tabela base regions , para que este dado possa ser filtrado na plataforma por regi\u00f5es de interesse: PRAGMA journal_mode = off; PRAGMA cache_size = -1024000; SELECT DisableSpatialIndex('unidades_conservacao_integral', 'Geometry'); SELECT DiscardGeometryColumn('unidades_conservacao_integral', 'Geometry'); DROP TABLE \"unidades_conservacao_integral\"; CREATE TABLE \"unidades_conservacao_integral\" ( \"PK_UID\" INTEGER PRIMARY KEY AUTOINCREMENT, \"COD_UF\" INTEGER, \"COD_MUNICI\" TEXT, \"REGIAO\" TEXT, \"ESTADO\" TEXT, \"UF\" TEXT, \"MUNICIPIO\" TEXT, \"BIOMA\" TEXT, \"ARCODESMAT\" INTEGER, \"MATOPIBA\" INTEGER, \"AREA_HA\" REAL, \"REGION_FK\" INTEGER, \"ANO\" INTEGER ); SELECT AddGeometryColumn('unidades_conservacao_integral', 'Geometry', 4674, 'MULTIPOLYGON', 2); INSERT INTO \"unidades_conservacao_integral\"(COD_UF, COD_MUNICI, REGIAO, ESTADO, UF, MUNICIPIO, BIOMA, ARCODESMAT, MATOPIBA, AREA_HA, REGION_FK, ANO, Geometry) SELECT r.COD_UF, r.COD_MUNICI, r.REGIAO, r.ESTADO, r.UF, r.MUNICIPIO, r.BIOMA, r.ARCODESMAT, r.MATOPIBA, s.AREA_HA, r.PK_UID, '2014', s.Geometry FROM \"unidades_conservacao_integral_todos\" s, regions r WHERE r.COD_MUNICI = s.COD_MUNICI AND r.POL_HA = s.POL_HA; Pronto, agora voc\u00ea j\u00e1 sabe como atualizar os dados do banco de dados de indicadores da plataforma de Risco Socioambiental.","title":"Exemplo de inser\u00e7\u00e3o de dado n\u00e3o temporal"}]}